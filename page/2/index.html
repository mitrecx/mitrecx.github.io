<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/woAiLuo.jpg?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="Goals determine what you are going to be">
<meta property="og:type" content="website">
<meta property="og:title" content="MITRE">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="MITRE">
<meta property="og:description" content="Goals determine what you are going to be">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MITRE">
<meta name="twitter:description" content="Goals determine what you are going to be">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/">





  <title>MITRE</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">MITRE</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Goals determine what you are going to be</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/14/Linux-域名解析失败/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/14/Linux-域名解析失败/" itemprop="url">Linux 域名解析失败</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-14T15:00:23+08:00">
                2019-01-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-问题"><a href="#1-问题" class="headerlink" title="1 问题"></a>1 问题</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://mirrors.163.com/centos/7/os/x86_64/Packages/PackageKit-yum-plugin-1.1.10-1.el7.centos.x86_64.rpm</span><br></pre></td></tr></table></figure>
<p>报错如下：  </p>
<font color="red">正在解析主机 mirrors.163.com… 失败：域名解析暂时失败。<br>wget: 无法解析主机地址 “mirrors.163.com”</font>    

<h1 id="2-问题排查"><a href="#2-问题排查" class="headerlink" title="2 问题排查"></a>2 问题排查</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ping 百度的域名，ping不通</span></span><br><span class="line">ping baidu.com</span><br><span class="line"><span class="comment"># ping: unknown host baidu.com</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ping 百度的 ip，可以 ping通</span></span><br><span class="line">ping 220.181.112.244</span><br><span class="line"><span class="comment"># PING 220.181.112.244 (220.181.112.244) 56(84) bytes of data.</span></span><br><span class="line"><span class="comment"># 64 bytes from 220.181.112.244: icmp_seq=1 ttl=49 time=26.5 ms</span></span><br><span class="line"><span class="comment"># 64 bytes from 220.181.112.244: icmp_seq=2 ttl=49 time=26.3 ms</span></span><br></pre></td></tr></table></figure>
<p><strong>说明是 DNS 解析 有问题！</strong>  </p>
<p>修改 <font color="#0066ff">/etc/resolv.conf</font> 文件(DNS resolver配置文件) ：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nameserver 114.114.114.114</span><br></pre></td></tr></table></figure></p>
<p><strong>114DNS</strong> 以多个基础电信运营商自用的DNS系统为基础，通过扩展而建成专业的第三方高可靠 DNS服务平台….<br>总之，用 114DNS 做 DNS解析 能解决当下的问题。  </p>
<p>结果：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ping baidu.com</span><br><span class="line"><span class="comment"># PING baidu.com (220.181.57.216) 56(84) bytes of data.</span></span><br><span class="line"><span class="comment"># 64 bytes from 220.181.57.216: icmp_seq=1 ttl=49 time=22.3 ms</span></span><br><span class="line"><span class="comment"># 64 bytes from 220.181.57.216: icmp_seq=2 ttl=49 time=22.2 ms</span></span><br></pre></td></tr></table></figure></p>
<h1 id="3-附加说明"><a href="#3-附加说明" class="headerlink" title="3 附加说明"></a>3 附加说明</h1><p>Linux 版本信息：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">uname -a</span><br><span class="line"><span class="comment"># Linux ahtelecom-rhel6.4 2.6.32-358.el6.x86_64 #1 SMP Tue Jan 29 11:47:41 EST 2013 x86_64 x86_64 x86_64 GNU/Linux</span></span><br><span class="line"></span><br><span class="line">cat /etc/redhat-release</span><br><span class="line"><span class="comment"># Red Hat Enterprise Linux Server release 6.4 (Santiago)</span></span><br></pre></td></tr></table></figure></p>
<p>网络配置信息：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询网关</span></span><br><span class="line">route -n</span><br><span class="line"><span class="comment"># Kernel IP routing table</span></span><br><span class="line"><span class="comment"># Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span></span><br><span class="line"><span class="comment"># 169.254.169.254 10.189.2.1      255.255.255.255 UGH   0      0        0 eth0</span></span><br><span class="line"><span class="comment"># 10.189.2.0      0.0.0.0         255.255.255.0   U     1      0        0 eth0</span></span><br><span class="line"><span class="comment"># 0.0.0.0         10.189.2.1      0.0.0.0         UG    0      0        0 eth0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 网卡配置文件</span></span><br><span class="line">cat /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line"><span class="comment"># DEVICE=eth0</span></span><br><span class="line"><span class="comment"># TYPE=Ethernet</span></span><br><span class="line"><span class="comment"># ONBOOT=yes</span></span><br><span class="line"><span class="comment"># BOOTPROTO=dhcp</span></span><br><span class="line"><span class="comment"># NM_CONTROLLED=yes</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 服务器所需网络配置信息(information about the desired network configuration on your server)</span></span><br><span class="line">cat /etc/sysconfig/network</span><br><span class="line"><span class="comment"># NETWORKING=yes</span></span><br><span class="line"><span class="comment"># HOSTNAME=ahtelecom-rhel6.4</span></span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/14/redhat6-4忘记root密码/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/14/redhat6-4忘记root密码/" itemprop="url">redhat6.4忘记root密码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-14T10:47:13+08:00">
                2019-01-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-进入-grub-引导程序"><a href="#1-进入-grub-引导程序" class="headerlink" title="1 进入 grub 引导程序"></a>1 进入 grub 引导程序</h1><p>重启进入 GNU GRUB 界面。  </p>
<h1 id="2-用单用户模式登录"><a href="#2-用单用户模式登录" class="headerlink" title="2 用单用户模式登录"></a>2 用单用户模式登录</h1><p>输入 ‘e’字符，接着的界面会有3个选项出现：<br>root (hd0,0)<br>kernel /vmlinuz-2.6…<br>initrd /initramfs-2.6…  </p>
<p>选中 “kernel” 这一行，然后按下”e”键，出现以下页面：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-12/2019-01-14_105447.png" alt>  </p>
<p>在这行的末尾输入 “ single” (single前面有个空格)，回车。  </p>
<p>这时第二项依旧处于选中状态，然后按下 ‘b’ 重启。<br>操作系统启动完成，不需要输入密码，直接登录 root 账户。  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/09/Linux-命令-xargs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/09/Linux-命令-xargs/" itemprop="url">Linux 命令 xargs</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-09T14:53:40+08:00">
                2019-01-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在 Unix 和 类Unix 系统中，<strong><font color="red">xargs</font></strong> 的作用是 <strong>把 <font color="green">标准输入</font>(standard input) 转换成 其他命令的 <font color="green">命令行参数</font>(command-line arguments)</strong>。  </p>
<p><strong><font color="green">标准输入</font></strong>： 程序运行时从 <strong>键盘输入</strong>，或者 <strong>管道</strong> 传入的数据。<br>例如，grep 从 <strong>标准输入</strong>(管道) 中 获取数据 并查找 root 所在行：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd | grep <span class="string">"root"</span></span><br></pre></td></tr></table></figure></p>
<p><strong><font color="green">命令行参数</font></strong>： 此参数(数据) 在输入命令时就确定了。<br>例如， grep 从 <strong>命令行参数 /etc/passwd</strong> 中获取数据 并查找 root 所在行:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">"root"</span> /etc/passwd</span><br></pre></td></tr></table></figure></p>
<h1 id="1-为什么需要-xargs-做转换"><a href="#1-为什么需要-xargs-做转换" class="headerlink" title="1 为什么需要 xargs 做转换 ?"></a>1 为什么需要 xargs 做转换 ?</h1><p>上面的介绍中，grep 可以从 <strong>标准输入</strong> 获取数据，也可以从 <strong>命令行参数</strong> 获取数据。  </p>
<p>事实上，<strong>所有 Linux 命令 都可以从 命令行参数 获取数据</strong> (如果有命令行参数的话)。<br><strong>只有一部分 命令 能够从 标准输入 中获取数据</strong>，grep 和 cat 就在这一部分命令之中。  </p>
<p>举个例子， 文件 1.txt 内容如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.txt</span><br><span class="line">hello</span><br><span class="line">world</span><br></pre></td></tr></table></figure></p>
<p>执行以下命令，观察结果 (结果是每条命令下的注释) ：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"hello"</span></span><br><span class="line"><span class="comment"># hello</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cat 从标准输入中获取数据</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"hello"</span> | cat</span><br><span class="line"><span class="comment"># hello</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cat 同时标准输入和命令行参数获取数据，cat 会忽略 标准输入</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"hello"</span> | cat 1.txt</span><br><span class="line"><span class="comment"># 1.txt</span></span><br><span class="line"><span class="comment"># hello</span></span><br><span class="line"><span class="comment"># world</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cat 同时标准输入和命令行参数获取数据，- 使 cat 不忽略 标准输入</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"hello"</span> | cat 1.txt -</span><br><span class="line"><span class="comment"># 1.txt</span></span><br><span class="line"><span class="comment"># hello</span></span><br><span class="line"><span class="comment"># world</span></span><br><span class="line"><span class="comment"># hello</span></span><br></pre></td></tr></table></figure></p>
<p>同样的，grep 的情况如下：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-12/xargs-hello.png" alt>  </p>
<p>还有一些命令不能像 grep 和 cat 这样，支持 <strong>标准输入</strong>。<br>比如 kill , rm , cp , echo 等 命令 就 <strong><font color="red">不支持 标准输入</font></strong>。<br>而往往我们会有下面这种需求：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查找进程号，通过管道传给 kill 杀死该进程</span></span><br><span class="line"><span class="comment"># 以下命令无法执行，因为 kill 不支持 标准输入</span></span><br><span class="line">ps -ef | grep <span class="string">"weblogic.Server"</span> | awk <span class="string">'&#123;print $2&#125;'</span> | <span class="built_in">kill</span> -9</span><br></pre></td></tr></table></figure></p>
<p>这些 不支持标准输入的命令 想要 从标准输入中获取数据，就需要 <strong>xargs</strong> 命令做转换：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以下命令可以正常执行</span></span><br><span class="line">ps -ef | grep <span class="string">"weblogic.Server"</span> | awk <span class="string">'&#123;print $2&#125;'</span> | xargs -I &#123;&#125; <span class="built_in">kill</span> -9 &#123;&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="2-xargs-常用选项"><a href="#2-xargs-常用选项" class="headerlink" title="2 xargs 常用选项"></a>2 xargs 常用选项</h1><h2 id="I-选项-小写的-i"><a href="#I-选项-小写的-i" class="headerlink" title="-I 选项 (小写的 i)"></a>-I 选项 (小写的 i)</h2><p>用法：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xargs -I &#123;&#125; commandX &#123;&#125;</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">xargs -I&#123;&#125; commandX &#123;&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>{}</strong> 表示从 标准输入 传入的数据，也可以换成别的字符， 如 %，a，b，c 等等。   </p>
<p>举例，获取 1.txt 文件的最后两行，并以 <code>行内容.txt</code> 为文件名 创建两个文件：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail  -2  1.txt | xargs -I&#123;&#125; touch &#123;&#125;.txt</span><br></pre></td></tr></table></figure></p>
<h2 id="p-选项"><a href="#p-选项" class="headerlink" title="-p 选项"></a>-p 选项</h2><p>p 的含义 是 prompt 。<br>执行命令前会输出 命令，并需要确认才能执行(输入y执行，输入其他字符不执行)。<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tail  -2  1.txt | xargs -p -I&#123;&#125; touch &#123;&#125;.txt</span><br><span class="line"><span class="comment"># touch hello.txt ?...n</span></span><br><span class="line"><span class="comment"># touch world.txt ?...n</span></span><br></pre></td></tr></table></figure></p>
<h2 id="d-选项"><a href="#d-选项" class="headerlink" title="-d 选项"></a>-d 选项</h2><p>d 的含义 是 delimiter(分隔符) 。<br>xargs 命令 默认的 分隔符是 空白字符(空格，tab，换行)， 可以用 -d 选项自定义分隔符。  </p>
<p>例如：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"aa|bb|cc|dd"</span> | xargs <span class="built_in">echo</span></span><br><span class="line"><span class="comment"># aa|bb|cc|dd</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"aa|bb|cc|dd"</span> | xargs -d<span class="string">"|"</span> <span class="built_in">echo</span></span><br><span class="line"><span class="comment"># aa bb cc dd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -n1 选项的含义是 每个字段作为 一行处理</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"aa|bb|cc|dd"</span> | xargs -d<span class="string">"|"</span> -n1 <span class="built_in">echo</span></span><br><span class="line"><span class="comment"># aa</span></span><br><span class="line"><span class="comment"># bb</span></span><br><span class="line"><span class="comment"># cc</span></span><br><span class="line"><span class="comment"># dd</span></span><br></pre></td></tr></table></figure></p>
<h2 id="n-选项"><a href="#n-选项" class="headerlink" title="-n 选项"></a>-n 选项</h2><p>用法：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xargs -n数字 commandX</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">xargs -n 数字 commandX</span><br></pre></td></tr></table></figure></p>
<p>-n1 选项的含义是 每个字段作为 一行处理，<br>-n2 选项的含义是 每2个字段作为 一行处理，<br>-n3 选项的含义是 每3个字段作为 一行处理，<br>…  </p>
<p>看一个例子：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">cat abc</span><br><span class="line"><span class="comment"># aa</span></span><br><span class="line"><span class="comment"># bb</span></span><br><span class="line"><span class="comment"># cc dd</span></span><br><span class="line"><span class="comment"># ee ff gg</span></span><br><span class="line"></span><br><span class="line">cat abc | xargs <span class="built_in">echo</span></span><br><span class="line"><span class="comment"># aa bb cc dd ee ff gg</span></span><br><span class="line"></span><br><span class="line">cat abc | xargs -I&#123;&#125; <span class="built_in">echo</span> &#123;&#125;</span><br><span class="line"><span class="comment"># aa</span></span><br><span class="line"><span class="comment"># bb</span></span><br><span class="line"><span class="comment"># cc dd</span></span><br><span class="line"><span class="comment"># ee ff gg</span></span><br><span class="line"></span><br><span class="line">cat abc | xargs -n1 <span class="built_in">echo</span></span><br><span class="line"><span class="comment"># aa</span></span><br><span class="line"><span class="comment"># bb</span></span><br><span class="line"><span class="comment"># cc</span></span><br><span class="line"><span class="comment"># dd</span></span><br><span class="line"><span class="comment"># ee</span></span><br><span class="line"><span class="comment"># ff</span></span><br><span class="line"><span class="comment"># gg</span></span><br><span class="line"></span><br><span class="line">cat abc | xargs -n2 <span class="built_in">echo</span></span><br><span class="line"><span class="comment"># aa bb</span></span><br><span class="line"><span class="comment"># cc dd</span></span><br><span class="line"><span class="comment"># ee ff</span></span><br><span class="line"><span class="comment"># gg</span></span><br><span class="line"></span><br><span class="line">cat abc | xargs -n3 <span class="built_in">echo</span></span><br><span class="line"><span class="comment"># aa bb cc</span></span><br><span class="line"><span class="comment"># dd ee ff</span></span><br><span class="line"><span class="comment"># gg</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -n 选项 和 -I 选项一起用，-n 选项会失效</span></span><br><span class="line">cat abc | xargs -n1 -I&#123;&#125;  <span class="built_in">echo</span> &#123;&#125;</span><br><span class="line"><span class="comment"># aa</span></span><br><span class="line"><span class="comment"># bb</span></span><br><span class="line"><span class="comment"># cc dd</span></span><br><span class="line"><span class="comment"># ee ff gg</span></span><br></pre></td></tr></table></figure></p>
<p>注意： <strong><code>-n 选项</code> 和 <code>-I 选项</code> 一起用，-n 选项会失效</strong>。  </p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p>1、 <a href="https://en.wikipedia.org/wiki/Xargs" target="_blank" rel="noopener">xargs-wiki</a>  </p>
<p>2、 <a href="https://www.cnblogs.com/wangqiguo/p/6464234.html" target="_blank" rel="noopener">xargs命令详解，xargs与管道的区别</a>  </p>
<p>3、<a href="https://shapeshed.com/unix-xargs/" target="_blank" rel="noopener">Linux and Unix xargs command tutorial</a>  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/08/Linux-解析文件并插入-Oracle-数据库/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/08/Linux-解析文件并插入-Oracle-数据库/" itemprop="url">Linux 解析文件并插入 Oracle 数据库</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-08T16:02:41+08:00">
                2019-01-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-场景"><a href="#1-场景" class="headerlink" title="1 场景"></a>1 场景</h1><p>1 台 阿里的云主机 <strong>Ubuntu16.04</strong>， 安装 <strong>Oracle 数据库 客户端</strong> 12c R2。<br>1 台 华为的云主机 <strong>CentOS7</strong>， 安装 <strong>Oracle 数据库</strong> 12c R2。  </p>
<p>目标： Ubuntu 解析文本文件，并 利用sqlplus 插入 远程Oracle数据库中。   </p>
<p>文本文件 batch.dat:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1005|cherry|48|F|18</span><br><span class="line">1007|jason|48|M|18</span><br><span class="line">1008|嘉宣|20|F|1</span><br><span class="line">1008|嘉文|20|F|1</span><br></pre></td></tr></table></figure></p>
<p>数据库表 students 表结构：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; desc students;</span><br><span class="line"></span><br><span class="line">Name     Type         Nullable Default Comments</span><br><span class="line">-------- ------------ -------- ------- --------</span><br><span class="line">STU_ID   VARCHAR2(4)  Y                         </span><br><span class="line">STU_NAME VARCHAR2(50) Y                         </span><br><span class="line">AGE      NUMBER(3)    Y                         </span><br><span class="line">SEX      CHAR(1)      Y                         </span><br><span class="line">GRADE    NUMBER(2)    Y</span><br></pre></td></tr></table></figure></p>
<h1 id="2-实现"><a href="#2-实现" class="headerlink" title="2 实现"></a>2 实现</h1><p>tinsert.sh 文件：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">./tparse.sh;</span><br><span class="line"></span><br><span class="line">sqlplus -S system/123@114.115.165.64:1521/orcl&lt;&lt;EOF</span><br><span class="line">@sql2.txt</span><br><span class="line">commit;</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">EOF</span><br><span class="line"><span class="keyword">if</span> [[ $? -eq 0 ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"successfully!"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p>
<p>tparse.sh 文件：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">iconv -f gbk -t utf-8 batch.dat &gt; tbatch.dat;</span><br><span class="line">count=0;</span><br><span class="line"><span class="comment"># 在最后一行添加一行空行, 解决最后一行读取不到的问题</span></span><br><span class="line">sed -i <span class="string">'$a\ '</span> tbatch.dat;</span><br><span class="line"><span class="comment"># 删除所有空行</span></span><br><span class="line">sed -i <span class="string">'/^\s*$/d'</span> tbatch.dat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$line</span>;</span><br><span class="line">    query=`<span class="built_in">echo</span> <span class="variable">$line</span> | awk -F<span class="string">"|"</span> <span class="string">'&#123;</span></span><br><span class="line"><span class="string">    printf("'</span>\<span class="string">''</span>%s<span class="string">'\'</span><span class="string">','</span>\<span class="string">''</span>%s<span class="string">'\'</span><span class="string">','</span>\<span class="string">''</span>%s<span class="string">'\'</span><span class="string">','</span>\<span class="string">''</span>%s<span class="string">'\'</span><span class="string">','</span>\<span class="string">''</span>%s<span class="string">'\'</span><span class="string">'",$1,$2,$3,$4,$5);&#125;'</span>`;</span><br><span class="line">    statement=`<span class="built_in">echo</span> <span class="string">"insert into students(stu_id,stu_name,age,sex,grade) values(<span class="variable">$query</span>);"</span>`;</span><br><span class="line">    <span class="keyword">if</span> [[ count -eq 0 ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$statement</span> &gt; sql.txt;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$statement</span> &gt;&gt; sql.txt;</span><br><span class="line">    <span class="keyword">fi</span>  </span><br><span class="line">    count=$((count+1));</span><br><span class="line">    <span class="comment">#echo $count;</span></span><br><span class="line">    <span class="comment">#echo $statement;</span></span><br><span class="line"><span class="keyword">done</span> &lt; tbatch.dat</span><br><span class="line">cat sql.txt &gt; sql2.txt</span><br><span class="line"><span class="comment"># 去除Windows中的换行符 ^M</span></span><br><span class="line"><span class="comment"># cat -A sql.txt | sed 's/\^M//g' &gt; sql2.txt</span></span><br><span class="line"><span class="comment"># sed -i 's/\$//g' sql2.txt</span></span><br></pre></td></tr></table></figure></p>
<p>执行：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./tinsert.sh</span><br></pre></td></tr></table></figure></p>
<p>Windows 打开 PLSQL 连接 远程数据库，查询插入结果：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-12/2019-01-08_162224.png" alt>  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/08/Linux-处理中文乱码文件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/08/Linux-处理中文乱码文件/" itemprop="url">Linux 处理中文乱码文件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-08T15:14:39+08:00">
                2019-01-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-问题描述"><a href="#1-问题描述" class="headerlink" title="1 问题描述"></a>1 问题描述</h1><p>在 Windows10 系统中创建一个 包含中文的 文本文件 test.txt，<br>把 test.txt 上传(通过 FlashFXP 5 或者 Xftp6 上传)到 Linux (Ubuntu16.04)，<br>vim/cat/nl 打开 test.txt 文件乱码。  </p>
<h1 id="2-问题排查"><a href="#2-问题排查" class="headerlink" title="2 问题排查"></a>2 问题排查</h1><p>Win10 系统编码方式：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chcp</span><br><span class="line"><span class="comment"># 936</span></span><br></pre></td></tr></table></figure></p>
<p>代码页936 表示 gbk 编码。<br>代码页65001 表示UTF-8 编码。  </p>
<p>Ubuntu16.04 系统编码方式：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">locale</span><br><span class="line"><span class="comment"># LANG=zh_CN.UTF-8</span></span><br></pre></td></tr></table></figure></p>
<h2 id="2-1-解决方式一"><a href="#2-1-解决方式一" class="headerlink" title="2.1 解决方式一"></a>2.1 解决方式一</h2><p>在 linux 系统中，对文件进行编码转换：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># convert text from one character encoding to another </span></span><br><span class="line">iconv -f gbk -t utf-8 test.txt &gt; target.txt</span><br></pre></td></tr></table></figure></p>
<p>-f from-encoding 表示 原编码格式；<br>-t to-encoding 表示 目的编码格式</p>
<p><strong><font color="green">target.txt 文件内容 显示中文正常</font></strong>。  </p>
<h2 id="2-2-解决方式二-无效"><a href="#2-2-解决方式二-无效" class="headerlink" title="2.2 解决方式二(无效)"></a>2.2 解决方式二(无效)</h2><p>修改 Win10 系统编码方式为 UTF-8：<br>通过注册表编辑器 ( cmd -&gt; regedit ) 修改<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HKEY_CURRENT_USER\Console\%SystemRoot%_system32_cmd.exe</span><br></pre></td></tr></table></figure></p>
<p>的 codepage 数值 为 65001 (十进制) 。重启计算机。<br>然后重新上传文件到 Linux。<br>亲测这个方式 <strong>无法解决中文乱码问题</strong>。  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/08/Oracle-数据库乱码问题解决/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/08/Oracle-数据库乱码问题解决/" itemprop="url">Oracle 数据库乱码问题解决</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-08T11:06:31+08:00">
                2019-01-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-问题描述"><a href="#1-问题描述" class="headerlink" title="1 问题描述"></a>1 问题描述</h1><p>下图中，<strong><font color="red">红色</font></strong> 的线表示乱码，<strong><font color="green">绿色</font></strong> 的线表示正常。  </p>
<p><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-12/oracledatabase-env2.png" alt>  </p>
<p><strong>3 种方式</strong> 插入和查询数据 乱码情况如下：<br>1、 数据库服务器 <strong>本地</strong> 用 <strong>sqlplus</strong> 登录，插入中文数据，查询结果 <strong><font color="red">乱码</font></strong> ！<br>2、 Ubuntu <strong>客户端</strong> 用 <strong>sqlplus</strong> 登录，插入中文数据，查询结果  <strong><font color="red">乱码</font></strong> ！<br>3、 Windows <strong>客户端</strong> 用 <strong>PL/SQL</strong> 登录，插入中文数据，查询结果 <strong><font color="green">正常</font></strong>。但是用前两种方式查询 此方式插入的中文数据，仍然是乱码。  </p>
<p>让我困惑的是，方式 3 正常，而 方式 1 乱码。  </p>
<h1 id="2-问题排查"><a href="#2-问题排查" class="headerlink" title="2 问题排查"></a>2 问题排查</h1><h2 id="2-1-服务端-sqlplus-插入中文乱码"><a href="#2-1-服务端-sqlplus-插入中文乱码" class="headerlink" title="2.1 服务端 sqlplus 插入中文乱码"></a>2.1 服务端 sqlplus 插入中文乱码</h2><p>服务端 (CentOS) 的 字符集：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">locale</span><br><span class="line"><span class="comment"># LANG=zh_CN.UTF-8</span></span><br></pre></td></tr></table></figure></p>
<p>zh 表示中文，CN 表示大陆地区， UTF-8 表示编码方式。  </p>
<p>数据库的 字符集：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--Oracle数据库字符集 (主要)</span></span><br><span class="line"><span class="keyword">select</span> userenv(<span class="string">'language'</span>) <span class="keyword">from</span> dual;</span><br><span class="line"><span class="comment">--SIMPLIFIED CHINESE_CHINA.UTF8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--数据库字符集 (参考)</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> NLS_DATABASE_PARAMETERS;</span><br><span class="line"><span class="comment">--AMERICAN.UTF8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--实例字符集 (参考)</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> NLS_INSTANCE_PARAMETERS;</span><br><span class="line"><span class="comment">--AMERICAN</span></span><br></pre></td></tr></table></figure></p>
<p>系统环境 和 数据库环境 都是 UTF-8 编码，为什么插入数据库的中文就乱码了呢？  </p>
<p><strong><font color="red">原因</font></strong>：客户端 (通过localhost连接数据库，CentOS本身是服务端，也是客户端)  <strong>NLS_LANG 环境变量</strong> 没有设置 ！    </p>
<p>sqlplus 把 中文发给 Oracle 数据库时，会通过  <strong>NLS_LANG 环境变量</strong>  告诉数据库 (中文)字符串是以什么编码格式编码的，Oracle数据库有它自己的编码表(多个)，它会根据编码表对编码进行翻译和转码。最后，将转码之后的编码 存放到Oracle数据库中去。  </p>
<p>设置一下环境变量，乱码问题解决：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> NLS_LANG=<span class="string">'SIMPLIFIED CHINESE_CHINA.UTF8'</span></span><br></pre></td></tr></table></figure></p>
<p>此时，通过 Windows PL/SQL 查询 CentOS 本地插入的 中文数据，也是正常的。  </p>
<h2 id="2-2-远程客户端-sqlplus-插入中文乱码"><a href="#2-2-远程客户端-sqlplus-插入中文乱码" class="headerlink" title="2.2 远程客户端 sqlplus 插入中文乱码"></a>2.2 远程客户端 sqlplus 插入中文乱码</h2><p>远程客户端 Ubuntu 系统的编码：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">locale</span><br><span class="line"><span class="comment"># LANG=zh_CN.UTF-8</span></span><br></pre></td></tr></table></figure></p>
<p>同样的问题，Ubuntu 也没有 设置 <strong>NLS_LANG 环境变量</strong>。因此导致了乱码。  </p>
<p>设置  <strong>NLS_LANG 环境变量</strong> 字符集为 UTF-8 ：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> NLS_LANG=<span class="string">'SIMPLIFIED CHINESE_CHINA.UTF8'</span></span><br></pre></td></tr></table></figure></p>
<p>远程客户端 sqlplus 插入中文乱码 问题解决。<br>此时，通过 Windows PL/SQL 查询 Ubuntu 客户端插入的 中文数据，也是正常的。  </p>
<h1 id="3-总结"><a href="#3-总结" class="headerlink" title="3 总结"></a>3 总结</h1><p>数据库出现乱码时，应该逐一检查下列信息：   </p>
<ol>
<li>服务端数据库字符集：<strong>select userenv(‘language’) from dual</strong>    </li>
<li>客户端操作系统字符集：<strong>locale</strong>      </li>
<li>客户端操作系统 环境变量： <strong>NLS_LANG</strong>   </li>
</ol>
<p>应该将 三者 的字符集统一。  </p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p> 1、 <a href="https://blog.csdn.net/fyyinjing/article/details/77877239" target="_blank" rel="noopener">使用sqlplus执行sql时，有中文有乱码</a>   </p>
<p> 2、 <a href="https://www.cnblogs.com/xdouby/p/5666624.html" target="_blank" rel="noopener">Oracle数据库中文乱码问题</a>   </p>
<p> 3、 <a href="https://blog.csdn.net/shiyu1157758655/article/details/78748283" target="_blank" rel="noopener">Oracle 修改字符集—AL32UTF8 转换成UTF8字符集</a>  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/07/Linux-安装-Oracle-Database-客户端/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/07/Linux-安装-Oracle-Database-客户端/" itemprop="url">Linux 安装 Oracle Database 客户端</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-07T10:02:13+08:00">
                2019-01-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Oracle DataBase Client 版本和远程数据库的版本都是 12.2.0.1.0。  </p>
<h1 id="1-下载-Instant-Client-Package-Basic-和-SQL-Plus"><a href="#1-下载-Instant-Client-Package-Basic-和-SQL-Plus" class="headerlink" title="1 下载 Instant Client Package (Basic 和 SQL*Plus)"></a>1 下载 Instant Client Package (Basic 和 SQL*Plus)</h1><p><a href="https://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html" target="_blank" rel="noopener">下载地址</a>  </p>
<p>下载两个压缩包：  </p>
<ul>
<li>instantclient-basic-linux.x64-12.2.0.1.0.zip   </li>
<li>instantclient-sqlplus-linux.x64-12.2.0.1.0.zip  </li>
</ul>
<h1 id="2-解压"><a href="#2-解压" class="headerlink" title="2 解压"></a>2 解压</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unzip instantclient-basic-linux.x64-12.2.0.1.0.zip</span><br><span class="line">unzip instantclient-sqlplus-linux.x64-12.2.0.1.0.zip</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /opt/instantclient</span><br><span class="line">mv instantclient_12_2/* /opt/instantclient</span><br></pre></td></tr></table></figure>
<h1 id="3-设置环境变量"><a href="#3-设置环境变量" class="headerlink" title="3 设置环境变量"></a>3 设置环境变量</h1><p>把以下环境变量加入 <code>~/.bashrc</code>文件中 (或者 在 <code>/etc/profile.d</code> 目录下新建一个文件)：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> ORACLE_HOME=/opt/instantclient</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=/opt/instantclient</span><br><span class="line"><span class="built_in">export</span> TNS_ADMIN=/opt/instantclient</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/opt/instantclient</span><br></pre></td></tr></table></figure></p>
<h1 id="4-连接-Oracle-数据库"><a href="#4-连接-Oracle-数据库" class="headerlink" title="4 连接 Oracle 数据库"></a>4 连接 Oracle 数据库</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlplus system/123@114.115.165.64:1521/orcl</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/03/CentOS7-安装-Oracle-Database-12c-R2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/03/CentOS7-安装-Oracle-Database-12c-R2/" itemprop="url">CentOS7 安装 Oracle Database 12c R2</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-03T23:39:48+08:00">
                2019-01-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-了解-Oracle-Database"><a href="#1-了解-Oracle-Database" class="headerlink" title="1 了解 Oracle Database"></a>1 了解 Oracle Database</h1><p><a href="https://www.oracle.com/database/" target="_blank" rel="noopener">Oracle</a> 数据库的版本 [<a href="https://en.wikipedia.org/wiki/Oracle_Database#Releases_and_versions" target="_blank" rel="noopener">wiki</a>]：<br>1979年夏，Oracle第二版发布。<br>1998年9月，<strong>Oracle 8i</strong>，该版本开始对 <strong>Internet</strong> 的支持。<br>2001年6月，Oracle 9i。<br>2003年9月，<strong>Oracle 10g</strong>，加入了 <strong>网格(grid)计算</strong> 的功能。<br>2007年7月，Oracle 11g。<br>2013年6月，Oracle发布了 <strong>12c Release 1</strong>，为 <strong>云(cloud)计算</strong> 设计。引入 <strong>CDB</strong>(Container Database,数据库容器)与 <strong>PDB</strong>(Pluggable Database,可插拔数据库)的新特性。<br><strong><font color="red">2016年9月</font></strong>，Oracle Database <strong>12c Release 2</strong>，本文安装的版本。<br>2018年2月，Oracle Database 18c，Polymorphic(多态的) Table Functions, Active Directory Integration。  </p>
<h1 id="2-安装-Oracle-Database-12c-Release-2"><a href="#2-安装-Oracle-Database-12c-Release-2" class="headerlink" title="2 安装 Oracle Database 12c Release 2"></a>2 安装 Oracle Database 12c Release 2</h1><p>前言：<br>在华为买了一个云主机，专门装 Oracle 数据库用的。<br>买来时装的是 Ubuntu16.04，但是 Oracle Database 不直接支持 Ubuntu。<br>于是换成 Oracle Linux 7，OL7安装数据库(Oracle Installation Prerequisites可以自动配置)方便，可是安装图形化界面时 yum 源改了几次都不行。<br>于是换成 <strong>RedHat 6</strong>，<strong>Fedora 26</strong>，CoreOS 还是出错。<br>最后 装了 n 次 <strong>CentOS 7</strong> ，在 CentOS 7 上装了 n 次 数据库， 建了 n 次 库，终于成功了。  </p>
<p>这一过程整整花了10天，难过(ಥ﹏ಥ)。。。。<br>linux包管理工具一直都用apt，这次接触到了<a href="https://www.cnblogs.com/LiuChunfu/p/8052890.html" target="_blank" rel="noopener">rpm</a> ，yum，dnf。还有一些额外收获。   </p>
<p>下面进入正题。</p>
<hr>
<h2 id="2-0-CentOS-7-硬件配置情况"><a href="#2-0-CentOS-7-硬件配置情况" class="headerlink" title="2.0 CentOS 7 硬件配置情况"></a>2.0 CentOS 7 硬件配置情况</h2><p>配置swap：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dd <span class="keyword">if</span>=/dev/zero of=/home/swap bs=1024 count=2097152 <span class="comment">#bs为单位，count为设置的大小2048*1024</span></span><br><span class="line">mkswap  /home/swap     <span class="comment">#格式化交换文件</span></span><br><span class="line">swapon  /home/swap     <span class="comment">#立即启用交换分区文件, 要停止使用新创建的swap文件,只要执行 swapoff/home/swap命令即可.</span></span><br></pre></td></tr></table></figure></p>
<p>为了避免 swap 分区在重启后失效，<code>vim /etc/fstab</code> 添加一行:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/home/swap             swap          swap    defaults        0 0</span><br></pre></td></tr></table></figure></p>
<p>查看内存分配情况:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">free -m</span><br><span class="line"></span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">            total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:         3789        1065         218         963        2504        1422</span><br><span class="line">Swap:        2047           8        2039</span><br></pre></td></tr></table></figure></p>
<p>配置 2G 的 swap 以后的机器：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-12/2019-01-04_002235.png" alt>  </p>
<h2 id="2-1-下载"><a href="#2-1-下载" class="headerlink" title="2.1 下载"></a>2.1 下载</h2><p><a href="https://www.oracle.com/technetwork/database/enterprise-edition/downloads/oracle12c-linux-12201-3608234.html" target="_blank" rel="noopener">Oracle Database 12c Release 2 (12.2.0.1.0)下载</a><br>先下载到本地(Window10)，然后用 <strong><font color="red">Xshell 6</font></strong> ssh 连接 CentOS7 ，点击 “<strong>新建文件传输(Xftp)</strong>” 可以把下载好的文件上传到 CentOS7 上。  </p>
<p>上传完了，给 CentOS7 安装图形界面：<br>安装X Window System<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum groupinstall <span class="string">"X Window System"</span></span><br></pre></td></tr></table></figure></p>
<p>安装图形桌面 GNOME(GNOME Desktop)<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum groupinstall <span class="string">"GNOME Desktop"</span></span><br></pre></td></tr></table></figure></p>
<p>Chrome 打开 华为云主机控制台 页面，点击 “远程登录” ，登录后验证图形桌面是否安装成功：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">init 5</span><br></pre></td></tr></table></figure></p>
<p>如果出现以下图形桌面表示安装成功：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-12/2019-01-04_090238.png" alt>  </p>
<p>注：<br>虽然 Oracle 数据库支持 silent 安装(没有图形桌面也能安装)，<br>但考虑到 silent 安装 配置 rsp 文件有些繁琐，<br>不如 先安装图形桌面，然后直接安装 Oracle数据库，比较方便。  </p>
<h2 id="2-2-安装-Oracle-数据库"><a href="#2-2-安装-Oracle-数据库" class="headerlink" title="2.2 安装 Oracle 数据库"></a>2.2 安装 Oracle 数据库</h2><p><a href="https://oracle-base.com/articles/12c/oracle-db-12cr2-installation-on-oracle-linux-6-and-7#Installation" target="_blank" rel="noopener">安装方法只用三步</a>:  </p>
<ol>
<li>解压安装文件  </li>
<li>配置安装必要条件  </li>
<li>安装  </li>
</ol>
<h3 id="2-2-1-解压数据库安装文件"><a href="#2-2-1-解压数据库安装文件" class="headerlink" title="2.2.1 解压数据库安装文件"></a>2.2.1 解压数据库安装文件</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip linuxx64_12201_database.zip</span><br></pre></td></tr></table></figure>
<h3 id="2-2-2-Oracle-Installation-Prerequisites"><a href="#2-2-2-Oracle-Installation-Prerequisites" class="headerlink" title="2.2.2 Oracle Installation Prerequisites"></a>2.2.2 Oracle Installation Prerequisites</h3><p>如果 Linux 版本是 Oracle Linux 的话，可以自动设置(Automatic Setup)，两行命令就把 <strong>安装必要条件</strong> 全部设置好了。<br>但是我的 Linux 版本是 CentOS7，只能手动设置(Manual Setup)：  </p>
<p>0、 配置hostname (参考 如下两张图，一张是 CentOS7，一张是 redhat6.4)：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-12/2019-01-17_154628.png" alt><br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-12/2019-01-17_153939.png" alt>  </p>
<p>1、<code>vim /etc/sysctl.conf</code> 添加下列内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fs.file-max = 6815744</span><br><span class="line">kernel.sem = 250 32000 100 128</span><br><span class="line">kernel.shmmni = 4096</span><br><span class="line">kernel.shmall = 1073741824</span><br><span class="line">kernel.shmmax = 4398046511104</span><br><span class="line">kernel.panic_on_oops = 1</span><br><span class="line">net.core.rmem_default = 262144</span><br><span class="line">net.core.rmem_max = 4194304</span><br><span class="line">net.core.wmem_default = 262144</span><br><span class="line">net.core.wmem_max = 1048576</span><br><span class="line">net.ipv4.conf.all.rp_filter = 2</span><br><span class="line">net.ipv4.conf.default.rp_filter = 2</span><br><span class="line">fs.aio-max-nr = 1048576</span><br><span class="line">net.ipv4.ip_local_port_range = 9000 65500</span><br></pre></td></tr></table></figure></p>
<p>运行下列命令改变内核参数：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/sbin/sysctl -p</span><br></pre></td></tr></table></figure></p>
<p>2、 <code>vim /etc/security/limits.d/oracle-database-server-12cR2-preinstall.conf</code> 添加下列内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">oracle   soft   nofile    1024</span><br><span class="line">oracle   hard   nofile    65536</span><br><span class="line">oracle   soft   nproc    16384</span><br><span class="line">oracle   hard   nproc    16384</span><br><span class="line">oracle   soft   stack    10240</span><br><span class="line">oracle   hard   stack    32768</span><br><span class="line">oracle   hard   memlock    134217728</span><br><span class="line">oracle   soft   memlock    134217728</span><br></pre></td></tr></table></figure></p>
<p>上面的内容在 <code>/etc/security/limits.conf</code> 中也添加一遍。  </p>
<p>3、安装依赖包：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">yum install binutils -y</span><br><span class="line">yum install compat-libcap1 -y</span><br><span class="line">yum install compat-libstdc++-33 -y</span><br><span class="line">yum install compat-libstdc++-33.i686 -y</span><br><span class="line">yum install glibc -y</span><br><span class="line">yum install glibc.i686 -y</span><br><span class="line">yum install glibc-devel -y</span><br><span class="line">yum install glibc-devel.i686 -y</span><br><span class="line">yum install ksh -y</span><br><span class="line">yum install libaio -y</span><br><span class="line">yum install libaio.i686 -y</span><br><span class="line">yum install libaio-devel -y</span><br><span class="line">yum install libaio-devel.i686 -y</span><br><span class="line">yum install libX11 -y</span><br><span class="line">yum install libX11.i686 -y</span><br><span class="line">yum install libXau -y</span><br><span class="line">yum install libXau.i686 -y</span><br><span class="line">yum install libXi -y</span><br><span class="line">yum install libXi.i686 -y</span><br><span class="line">yum install libXtst -y</span><br><span class="line">yum install libXtst.i686 -y</span><br><span class="line">yum install libgcc -y</span><br><span class="line">yum install libgcc.i686 -y</span><br><span class="line">yum install libstdc++ -y</span><br><span class="line">yum install libstdc++.i686 -y</span><br><span class="line">yum install libstdc++-devel -y</span><br><span class="line">yum install libstdc++-devel.i686 -y</span><br><span class="line">yum install libxcb -y</span><br><span class="line">yum install libxcb.i686 -y</span><br><span class="line">yum install make -y</span><br><span class="line">yum install nfs-utils -y</span><br><span class="line">yum install net-tools -y</span><br><span class="line">yum install smartmontools -y</span><br><span class="line">yum install sysstat -y</span><br><span class="line">yum install unixODBC -y</span><br><span class="line">yum install unixODBC-devel -y</span><br><span class="line"></span><br><span class="line">yum install gcc -y</span><br><span class="line">yum install gcc-c++ -y</span><br><span class="line">yum install libXext -y</span><br><span class="line">yum install libXext.i686 -y</span><br><span class="line">yum install zlib-devel -y</span><br><span class="line">yum install zlib-devel.i686 -y</span><br></pre></td></tr></table></figure></p>
<p>4、 创建用户组合用户：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">groupadd -g 54321 oinstall</span><br><span class="line">groupadd -g 54322 dba</span><br><span class="line">groupadd -g 54323 oper</span><br><span class="line">groupadd -g 54324 backupdba</span><br><span class="line">groupadd -g 54325 dgdba</span><br><span class="line">groupadd -g 54326 kmdba</span><br><span class="line">groupadd -g 54327 asmdba</span><br><span class="line">groupadd -g 54328 asmoper</span><br><span class="line">groupadd -g 54329 asmadmin</span><br><span class="line">groupadd -g 54330 racdba</span><br><span class="line"><span class="comment"># 创建 oracle 用户</span></span><br><span class="line">useradd -u 54321 -g oinstall -G dba,oper oracle</span><br><span class="line"></span><br><span class="line">passwd oracle</span><br></pre></td></tr></table></figure></p>
<p>5、 <code>vim /etc/selinux/config</code> 修改 SELINUX 标识：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELINUX=permissive</span><br></pre></td></tr></table></figure></p>
<p>重启或执行以下命令 (root)：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setenforce Permissive</span><br></pre></td></tr></table></figure></p>
<p>6、 关闭防火墙 (root)：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br></pre></td></tr></table></figure></p>
<p>7、 创建安装目录：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /u01/app/oracle/product/12.2.0.1/db_1</span><br><span class="line">chown -R oracle:oinstall /u01</span><br><span class="line">chmod -R 775 /u01</span><br></pre></td></tr></table></figure></p>
<p>8、 创建环境变量文件 setEnv.sh :<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /home/oracle/scripts</span><br></pre></td></tr></table></figure></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /home/oracle/scripts/setEnv.sh &lt;&lt;EOF</span><br><span class="line"><span class="comment"># Oracle Settings</span></span><br><span class="line"><span class="built_in">export</span> TMP=/tmp</span><br><span class="line"><span class="built_in">export</span> TMPDIR=\<span class="variable">$TMP</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> ORACLE_HOSTNAME=ol7-122.localdomain</span><br><span class="line"><span class="built_in">export</span> ORACLE_UNQNAME=cdb1</span><br><span class="line"><span class="built_in">export</span> ORACLE_BASE=/u01/app/oracle</span><br><span class="line"><span class="built_in">export</span> ORACLE_HOME=\<span class="variable">$ORACLE_BASE</span>/product/12.2.0.1/db_1</span><br><span class="line"><span class="comment"># export ORACLE_SID=cdb1</span></span><br><span class="line"><span class="built_in">export</span> ORACLE_SID=orcl</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> PATH=/usr/sbin:/usr/<span class="built_in">local</span>/bin:\<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> PATH=\<span class="variable">$ORACLE_HOME</span>/bin:\<span class="variable">$PATH</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=\<span class="variable">$ORACLE_HOME</span>/lib:/lib:/usr/lib</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=\<span class="variable">$ORACLE_HOME</span>/jlib:\<span class="variable">$ORACLE_HOME</span>/rdbms/jlib</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p><code>/home/oracle/.bash_profile</code> 引用 setEnv.sh 文件：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">". /home/oracle/scripts/setEnv.sh"</span> &gt;&gt; /home/oracle/.bash_profile</span><br></pre></td></tr></table></figure></p>
<p>9、 Create a “start_all.sh” and “stop_all.sh” script that can be called from a startup/shutdown service.<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /home/oracle/scripts/start_all.sh &lt;&lt;EOF</span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">. /home/oracle/scripts/setEnv.sh</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> ORAENV_ASK=NO</span><br><span class="line">. oraenv</span><br><span class="line"><span class="built_in">export</span> ORAENV_ASK=YES</span><br><span class="line"></span><br><span class="line">dbstart \<span class="variable">$ORACLE_HOME</span></span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cat &gt; /home/oracle/scripts/stop_all.sh &lt;&lt;EOF</span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">. /home/oracle/scripts/setEnv.sh</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> ORAENV_ASK=NO</span><br><span class="line">. oraenv</span><br><span class="line"><span class="built_in">export</span> ORAENV_ASK=YES</span><br><span class="line"></span><br><span class="line">dbshut \<span class="variable">$ORACLE_HOME</span></span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">chown -R oracle.oinstall /home/oracle/scripts</span><br><span class="line">chmod u+x /home/oracle/scripts/*.sh</span><br></pre></td></tr></table></figure></p>
<h3 id="2-2-3-安装"><a href="#2-2-3-安装" class="headerlink" title="2.2.3 安装"></a>2.2.3 安装</h3><p>打开 Chrome 浏览器，打开 华为云主机控制台，登录 oracle 用户，打开图形桌面：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">init 5</span><br></pre></td></tr></table></figure></p>
<p>进入 解压后的 database 目录，执行：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./runInstaller</span><br></pre></td></tr></table></figure></p>
<p>接下来会出现一个 Oracle 安装窗口，<strong><font color="red">建议每次点击next之前，阅读清楚选项的意义。</font></strong>    </p>
<p>安装完成后，检查一下环境变量 <strong><font color="red">$ORACLE_SID</font></strong>：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#多数环境变量在 /home/oracle/scripts/setEnv.sh 文件中设置</span></span><br><span class="line">env | grep -i oracle</span><br><span class="line"></span><br><span class="line"><span class="comment"># /etc/oratab中的 sid 一定要和 $ORACLE_SID 一致</span></span><br><span class="line">vim /etc/oratab</span><br></pre></td></tr></table></figure></p>
<h1 id="3-建库"><a href="#3-建库" class="headerlink" title="3 建库"></a>3 建库</h1><p>终端执行(需要图形桌面环境)：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dbca</span><br></pre></td></tr></table></figure></p>
<p>弹出 <strong>Database Configuration Assistant</strong> 窗口，默认next 创建数据库。  </p>
<h1 id="4-登录"><a href="#4-登录" class="headerlink" title="4 登录"></a>4 登录</h1><h2 id="4-1-登录配置"><a href="#4-1-登录配置" class="headerlink" title="4.1 登录配置"></a>4.1 登录配置</h2><p><strong>listener.ora 和 tnsnames.ora 配置 的 实例名(或服务名) 应该和 $ORACLE_SID 一致</strong>。  </p>
<p>配置 listener.ora  [ <a href="https://docs.oracle.com/cd/B28359_01/network.111/b28317/listener.htm#NETRF008" target="_blank" rel="noopener">listener.ora文件介绍</a> ]:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /u01/app/oracle/product/12.2.0.1/db_1/network/admin/listener.ora</span><br><span class="line"></span><br><span class="line"><span class="comment">#或者</span></span><br><span class="line">vim <span class="variable">$ORACLE_HOME</span>/network/admin/listener.ora</span><br></pre></td></tr></table></figure></p>
<p>内容如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">LISTENER =</span><br><span class="line">  (DESCRIPTION_LIST =</span><br><span class="line">    (DESCRIPTION =</span><br><span class="line">      (ADDRESS = (PROTOCOL = TCP)(HOST = mitre)(PORT = 1521))</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">ADR_BASE_LISTENER = /u01/app/oracle</span><br><span class="line"></span><br><span class="line">SID_LIST_LISTENER =</span><br><span class="line">  (SID_LIST =</span><br><span class="line">    (SID_DESC =</span><br><span class="line">      (GLOBAL_DBNAME = orcl)</span><br><span class="line">        (SID_NAME = orcl)</span><br><span class="line">    )</span><br><span class="line">  )</span><br></pre></td></tr></table></figure></p>
<p>配置 tnsnames.ora  [ <a href="https://docs.oracle.com/cd/B28359_01/network.111/b28317/tnsnames.htm#NETRF007" target="_blank" rel="noopener">tnsnames.ora文件介绍</a> ]:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="variable">$ORACLE_HOME</span>/network/admin/tnsnames.ora</span><br></pre></td></tr></table></figure></p>
<p>内容如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ORCL =</span><br><span class="line">  (DESCRIPTION =</span><br><span class="line">    (ADDRESS_LIST =</span><br><span class="line">      (ADDRESS = (PROTOCOL = TCP)(HOST = mitre)(PORT = 1521))</span><br><span class="line">    )</span><br><span class="line">    (CONNECT_DATA =</span><br><span class="line">      (SERVICE_NAME = orcl)</span><br><span class="line">    )</span><br><span class="line">  )</span><br></pre></td></tr></table></figure></p>
<p>查看 数据库的 <strong>监听器</strong> 状态：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lsnrctl status</span><br><span class="line"></span><br><span class="line">lsnrctl start <span class="comment">#打开监听器</span></span><br><span class="line">lsnrctl stop <span class="comment">#关闭</span></span><br></pre></td></tr></table></figure></p>
<h2 id="4-2-启动数据库-与-sqlplus-登录方法"><a href="#4-2-启动数据库-与-sqlplus-登录方法" class="headerlink" title="4.2 启动数据库 与 sqlplus 登录方法"></a>4.2 启动数据库 与 sqlplus 登录方法</h2><p>启动数据库：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打开 sqlplus</span></span><br><span class="line">sqlplus / as sysdba</span><br><span class="line"><span class="comment">## 打开成功会 弹出 SQL&gt; 提示符</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动数据库</span></span><br><span class="line">startup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用户登录</span></span><br><span class="line"><span class="comment"># conn 用户名/密码</span></span><br><span class="line">conn system/123</span><br></pre></td></tr></table></figure></p>
<p><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-12/2019-01-04_153831.png" alt>  </p>
<p>在数据库启动的情况下，可以直接在 shell 终端进行 用户登录 ：<br><code> sqlplus 用户名/密码@ip:port/SID </code><br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlplus system/123@localhost:1521/orcl</span><br></pre></td></tr></table></figure></p>
<h2 id="4-3-利用-PL-SQL-远程登录"><a href="#4-3-利用-PL-SQL-远程登录" class="headerlink" title="4.3 利用 PL/SQL 远程登录"></a>4.3 利用 PL/SQL 远程登录</h2><p>Chrome 打开 华为云主机控制台，添加 <strong>安全组-入规则</strong> ，添加 1521 端口。<br>安装 Oracle client 和 PL/SQL。<br>登录结果：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-12/2019-01-04_102804.png" alt>  </p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p>1、 <a href="https://blog.csdn.net/sinat_32998977/article/details/79437014" target="_blank" rel="noopener">阿里云 CentOS7.4，静默安装Oracle11g2的教程</a>   </p>
<p>2、 <a href="https://blog.csdn.net/wang465745776/article/details/80161153" target="_blank" rel="noopener">CentOS7安装图形界面</a>  </p>
<p>3、 <a href="https://oracle-base.com/articles/12c/oracle-db-12cr2-installation-on-oracle-linux-6-and-7#Installation" target="_blank" rel="noopener">Oracle Database 12c Release 2 (12.2) Installation On Oracle Linux 7</a>  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/31/2018-革新/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/31/2018-革新/" itemprop="url">2018-革新</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-31T18:41:41+08:00">
                2018-12-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/总结/" itemprop="url" rel="index">
                    <span itemprop="name">总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="回顾"><a href="#回顾" class="headerlink" title="回顾"></a>回顾</h1><p>回顾 2018 年的计划, Java, 关系型数据库, 工作, 博客, 英语, 算是基本完成计划.  </p>
<p>2017 年的挫折, 在 2018 年初 还没有完全散去.  </p>
<p>2018 年 3,4,5 月份 主要在做 毕业设计和毕业论文(RoboCup 3D: 动态规划实现最优决策, 消息解析-投票机制实现统一决策).<br>5 月份 答辩获得 91 分, 拿到了优秀毕业生, 优秀毕业论文, 但是对找工作没有丝毫帮助…  </p>
<p>4 月份奔波在校招中, 最终拿到两个 offer, 决定入职一份 Java Web 开发的工作.  </p>
<p>5 月底拍了毕业照.<br>然后和 忠青, double-K, 纤纤, 方雅 一起去爬了天柱山. 顺道 去了 忠青的高中–桐城高中, <strong>勉成国器</strong> 的校训让人印象深刻.  </p>
<p>6 月初报了驾校, 考过科目一和科目二. 科目三 7 月 4号考, 因为 7 月 3号要入职, 所以没有考科目三.   </p>
<p>7 月 3 号在江阴入职, 到现在已经 5 个月了.<br>工作之余, 一直在学习 Web 框架(Servlet, Spring MVC), 同时学习一些业务相关的知识.  </p>
<p>9 月份, 去了 杭州 参加了 云栖大会, 看 阿里人 介绍了 自研的 RocketMQ, 和一些 容器化, 虚拟化技术.  </p>
<p>十一 国庆节 放假, 去了上海一趟. 和上海的朋友相比, 我还是菜鸟.  </p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>2018 年一直很顺利, 一切都在向好的方向发展.  </p>
<p>引用一句 哈佛 校训:<br>Nobody can casually succeed, it comes from <strong>the thorough self-control</strong> and <strong>the will</strong>.<br>谁也不能随随便便成功，它来自 彻底的自我管理 和 毅力。  </p>
<hr>
<h1 id="2019-年计划"><a href="#2019-年计划" class="headerlink" title="2019 年计划"></a>2019 年计划</h1><p>1, 开源框架掌握一套:<br>Meven<br>Spring Cloud<br>Spring Boot<br>MYSQL–MyBatis<br>消息中间件<br>Redis<br>git, svn<br>Jenkins</p>
<p>2, 换一份工作, 技术氛围一定要好.  </p>
<p>3, 英语: 实现基本无障碍阅读 英文技术文档.  </p>
<p>4, 博客: 提高 博客 质量.(知识体系化, 内容深度, 可读性 等方面)  </p>
<p>5, 管理学/心理学/文学 书籍阅读超过 2 本</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/25/Ubuntu防火墙/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/25/Ubuntu防火墙/" itemprop="url">Linux防火墙操作</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-25T11:04:32+08:00">
                2018-12-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-防火墙简介"><a href="#1-防火墙简介" class="headerlink" title="1 防火墙简介"></a>1 防火墙简介</h1><p>防火墙是位于 <strong>内部网</strong> 和 <strong>外部网(一般指公网)</strong> 之间的屏障，<br>它按照系统管理员预先定义好的 <strong>规则</strong> 来控制数据包的进出。<br>其作用是防止非法用户的进入。  </p>
<p>防火墙的特性：<br>1、内部网络和外部网络之间的所有网络数据流都必须经过防火墙<br>2、只有符合安全策略的数据流才能通过防火墙<br>3、应用层防火墙具备更细致的防护能力  </p>
<h1 id="2-UFW-–-Ubuntu"><a href="#2-UFW-–-Ubuntu" class="headerlink" title="2 UFW – Ubuntu"></a>2 UFW – Ubuntu</h1><p>UFW (<strong><font color="red">Uncomplicated Firewall</font></strong>，简单的防火墙) is a program for managing a netfilter firewall designed to be easy to use.<br>It uses a <strong>command-line interface</strong> consisting of a small number of simple commands(由少量简单命令组成的命令行接口), and uses <strong>iptables</strong> for configuration.     </p>
<h2 id="2-1-ufw-manul"><a href="#2-1-ufw-manul" class="headerlink" title="2.1 ufw manul"></a>2.1 ufw manul</h2><p>NAME<br>  ufw - program for managing a netfilter firewall<br>DESCRIPTION<br>  This program is for managing a Linux firewall and aims to provide an easy to use interface for the user.  </p>
<h2 id="2-2-ufw-常用操作"><a href="#2-2-ufw-常用操作" class="headerlink" title="2.2 ufw 常用操作"></a>2.2 ufw 常用操作</h2><p>1、<br><strong><font color="green">ufw [–dry-run] enable|disable|reload</font></strong>  打开|关闭|重启 防火墙<br><strong>–dry-run</strong>  试运行，显示结果并不执行  </p>
<p>2、<br><strong><font color="green">ufw [–dry-run] status [verbose|numbered]</font></strong> 查看状态  </p>
<p>3、<br>ufw supports connection rate limiting, which is useful for <strong>protecting  against  brute-force  login  attacks</strong>.<br>When a limit rule is used, ufw will normally allow the connection but will deny connections if an IP address attempts to initiate <strong>6 or more connections within 30 seconds</strong>.<br>Typical usage is:<br><strong><font color="green">ufw limit ssh/tcp</font></strong><br>如果同一个IP地址在30秒之内进行了6次及6次以上的连接，ufw将阻止 (deny) 该连接  </p>
<p>更多操作参考:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man ufw</span><br></pre></td></tr></table></figure></p>
<h1 id="3-iptables-–-redhat"><a href="#3-iptables-–-redhat" class="headerlink" title="3 iptables – redhat"></a>3 iptables – redhat</h1><p>查询防火墙状态:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service iptables status</span><br></pre></td></tr></table></figure></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#停止防火墙:</span></span><br><span class="line">service iptables stop</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动防火墙:</span></span><br><span class="line">service iptables start</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启防火墙:</span></span><br><span class="line">service iptables restart</span><br></pre></td></tr></table></figure>
<p>防火墙配置文件 /etc/sysconfig/iptables 。  </p>
<h1 id="CentOS-7-防火墙"><a href="#CentOS-7-防火墙" class="headerlink" title="CentOS 7 防火墙"></a>CentOS 7 防火墙</h1><p>CentOS 7.0默认使用的是firewall作为防火墙</p>
<p>查看防火墙状态<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --state</span><br></pre></td></tr></table></figure></p>
<p>停止firewall<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld.service</span><br></pre></td></tr></table></figure></p>
<p>禁止firewall开机启动<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">disable</span> firewalld.service</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/11/Oracle-merger-语句/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/11/Oracle-merger-语句/" itemprop="url">Oracle merger 语句</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-11T10:25:50+08:00">
                2018-12-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Oracle 对 <strong>merge</strong> 语句的介绍：<br>Use the <strong><font color="red">MERGE</font></strong> statement to <strong>select rows from one or more sources for update or insertion</strong> into a table or view.<br>You can specify conditions to determine whether to <strong>update or insert into</strong> the target table or view.<br>This statement is a convenient way to combine multiple operations.  </p>
<p>例如，数据库有两张表 new 和 old，现在把 new 里的数据合并(插入)到 old 里。<br>如果是 old 表中 <strong>已存在的记录就 update，如果不存在就 insert</strong> 。  </p>
<p>当我们有 insertOrUpdate 这种需求的时候，使用 merge 会很容易。  </p>
<p>看一个例子：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--客户表</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> test_cus1;</span><br><span class="line"><span class="comment">--客户历史表</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> cus_his ;</span><br></pre></td></tr></table></figure></p>
<p>结果：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-12/2018-12-11_101429.png" alt>  </p>
<p><strong>把 test_cus1 表中的数据 插入 cus_his 表中:</strong><br>如果 cus_his 已经有此用户记录(根据 cus_id 确定唯一客户)，则更新 cus_his 表中此用户信息；<br>如果 cus_his 没有此用户，则插入 cus_his 表中。  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">merge</span> <span class="keyword">into</span> cus_his his</span><br><span class="line">  <span class="keyword">using</span> test_cus1 t</span><br><span class="line">  <span class="keyword">on</span>( his.cus_id = t.cus_id)</span><br><span class="line">  <span class="keyword">when</span> <span class="keyword">matched</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">update</span> <span class="keyword">set</span></span><br><span class="line">       his.cus_age=t.cus_age,</span><br><span class="line">       his.cus_name=t.cus_name</span><br><span class="line">  <span class="keyword">when</span> <span class="keyword">not</span> <span class="keyword">matched</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">insert</span> (his.cus_id,his.cus_name,his.cus_age)</span><br><span class="line">    <span class="keyword">values</span>(t.cus_id,t.cus_name,t.cus_age);</span><br></pre></td></tr></table></figure>
<p>结果：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-12/2018-12-11_102252.png" alt><br>结果分析：<br>cus_his 中已经存在的 “蚂蚁大哥”(cus_id=1001) 被 更新，<br>cus_his 中不存在的(cus_id=1002,1003,1004) 3 条用户记录 被插入 cus_his。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/29/JavaScript笔记4-jQuery和AJAX/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/29/JavaScript笔记4-jQuery和AJAX/" itemprop="url">JavaScript笔记4-jQuery 和 AJAX</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-29T10:33:02+08:00">
                2018-11-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-jQuery-和-AJAX"><a href="#1-jQuery-和-AJAX" class="headerlink" title="1 jQuery 和 AJAX"></a>1 jQuery 和 AJAX</h1><p>接着 <a href="https://mitrecx.github.io/2018/11/20/JavaScript%E7%AC%94%E8%AE%B03-AJAX/#head4" target="_blank" rel="noopener">上一节( JavaScript笔记3-AJAX )的例子</a>  </p>
<p>目录结构如下：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-29_155751.png" alt>  </p>
<p>其他文件不变，增加 demojquery.jsp ，此文件实现的功能和 demo2.jsp 相同。<br>( demojquery.jsp 只是用 jQuery 完成 demo2.jsp 的功能。)  </p>
<p>demojquery.jsp 内容 如下：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@page</span> <span class="attr">pageEncoding</span>=<span class="string">"utf-8"</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=utf-8"</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"jquery-3.3.1.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">		<span class="comment">// $()页面加载完毕后执行</span></span></span><br><span class="line"><span class="javascript">		$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">			$(<span class="string">"#szid"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">				<span class="keyword">var</span> url=<span class="built_in">encodeURI</span>(<span class="string">"http://localhost:8080/ajax01/demo1.do"</span>);</span></span><br><span class="line"><span class="javascript">				$.ajax(&#123;</span></span><br><span class="line"><span class="undefined">					url:url,</span></span><br><span class="line"><span class="javascript">					type:<span class="string">"POST"</span>,</span></span><br><span class="line"><span class="javascript">					success:<span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">						<span class="comment">// result就是服务器返回的内容 等价于 xhr.responseText</span></span></span><br><span class="line"><span class="javascript">						$(<span class="string">"#msg"</span>).html(result);</span></span><br><span class="line"><span class="undefined">					&#125;</span></span><br><span class="line"><span class="undefined">				&#125;);</span></span><br><span class="line"><span class="undefined">			&#125;)</span></span><br><span class="line"><span class="undefined">		&#125;)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">		<span class="comment">// 检查用户名是否可用</span></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">checkName</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> username=$(<span class="string">"#username"</span>).val();</span></span><br><span class="line"><span class="javascript">			<span class="comment">//console.log(username);</span></span></span><br><span class="line"><span class="javascript">			$(<span class="string">"#name_msg"</span>).html(<span class="string">"检查中....."</span>);</span></span><br><span class="line"><span class="javascript"><span class="comment">//			var url=encodeURI("http://localhost:8080/ajax01/check.do?name="+username);</span></span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> url=<span class="built_in">encodeURI</span>(<span class="string">"http://localhost:8080/ajax01/check.do"</span>);</span></span><br><span class="line"><span class="javascript">			$.ajax(&#123;</span></span><br><span class="line"><span class="javascript">				type:<span class="string">"POST"</span>,</span></span><br><span class="line"><span class="undefined">				url:url,</span></span><br><span class="line"><span class="javascript">				data:&#123;<span class="string">"name"</span>:username&#125;,</span></span><br><span class="line"><span class="javascript">				success:<span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">					$(<span class="string">"#name_msg"</span>).html(result);</span></span><br><span class="line"><span class="undefined">				&#125;</span></span><br><span class="line"><span class="undefined">			&#125;);</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">style</span>=<span class="string">"font-size: 30px;"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">id</span>=<span class="string">"szid"</span>&gt;</span>查看上证指数<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>股市新闻<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>时间<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>新一代股神mitre<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>2018-11-22<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>大海你真美<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>2018-11-21<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">onblur</span>=<span class="string">"checkName();"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"name_msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>常用的 ajax 配置参数：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">	url: 请求地址,</span><br><span class="line">	type: 请求类型(POST|GET),</span><br><span class="line">	data: 提交的数据,</span><br><span class="line">	<span class="keyword">async</span>: 同步或异步(<span class="literal">true</span>)处理,</span><br><span class="line">	dataType: 预期服务器返回的数据类型,</span><br><span class="line">	success: 成功回调函数,</span><br><span class="line">	error: 失败回调函数,</span><br><span class="line">	beforeSend: 请求发送前回调函数</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h1 id="2-servlet-返回-JSON"><a href="#2-servlet-返回-JSON" class="headerlink" title="2 servlet 返回 JSON"></a>2 servlet 返回 JSON</h1><p>实现 网页列表显示 功能。  </p>
<p>NoteListServlet2.java ，这个 servlet 返回的字符串是 由 <strong>JSONArray</strong> 类型 toString 得到的。<br>NoteListServlet2 返回的本质是一个 <strong>JSON数组</strong>。  </p>
<p>(NoteListServlet.java 仅做参考，内容和NoteListServlet2.java基本一样。 它返回的字符串是 由 <strong>JSONObject</strong> 类型 toString 得到的。<br>NoteListServlet 返回的本质是一个 <strong>JSON对象</strong>。)  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mitrecx.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NoteListServlet2</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    response.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</span><br><span class="line">    <span class="comment">//将笔记以 JSON 格式输出</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 返回 一个 json 对象</span></span><br><span class="line"><span class="comment">     * json:  &#123;id:"01",name:"JavaScript学习笔记"&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Note note = <span class="keyword">new</span> Note();</span><br><span class="line">    note.setId(<span class="string">"01"</span>);</span><br><span class="line">    note.setName(<span class="string">"JavaScript学习笔记"</span>);</span><br><span class="line">    JSONObject jsonObject=JSONObject.fromObject(note);</span><br><span class="line">    String jsonObjectString=jsonObject.toString();</span><br><span class="line">    <span class="comment">//System.out.println(jsonObjectString);</span></span><br><span class="line">    PrintWriter out=response.getWriter();</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 返回 json 数组</span></span><br><span class="line"><span class="comment">     * [&#123;"id":"01","name":"JavaScript学习笔记"&#125;,&#123;"id":"02","name":"JSON作为返回数据类型"&#125;]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Note note2=<span class="keyword">new</span> Note();</span><br><span class="line">    note2.setId(<span class="string">"02"</span>);</span><br><span class="line">    note2.setName(<span class="string">"JSON作为返回数据类型"</span>);</span><br><span class="line">    List&lt;Note&gt; list=<span class="keyword">new</span> ArrayList&lt;Note&gt;();</span><br><span class="line">    list.add(note);</span><br><span class="line">    list.add(note2);</span><br><span class="line">    JSONArray jsonArray=JSONArray.fromObject(list);</span><br><span class="line">    String jsonArrayString=jsonArray.toString();</span><br><span class="line">    <span class="comment">//out.println(jsonObjectString); //NoteListServlet 返回</span></span><br><span class="line">    out.println(jsonArrayString); <span class="comment">//NoteListServlet2 返回</span></span><br><span class="line"></span><br><span class="line">    out.flush();</span><br><span class="line">    out.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>web.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ajax-json<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>cn.mitrecx.servlet.NoteListServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ajax-json<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/ajax.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ajax-json2<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>cn.mitrecx.servlet.NoteListServlet2<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ajax-json2<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/ajax2.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>demo.html ，这才是重点。<br>重点是 AJAX请求返回的数据的处理。<br><strong><font color="red">JSON 和 JSON数组 ，dataType 都是 JSON。但是JSON对象要按对象处理，数组要按数组处理。</font></strong>  </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html;charset=utf-8"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-3.3.1.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">"#noteListBtn"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">          $(<span class="string">"#noteList"</span>).empty();</span></span><br><span class="line"><span class="javascript">          $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">            type: <span class="string">"post"</span>,</span></span><br><span class="line"><span class="javascript">            url: <span class="string">"http://localhost:8080/ajax-json/ajax.do"</span>,</span></span><br><span class="line"><span class="javascript">            dataType: <span class="string">"json"</span>,</span></span><br><span class="line"><span class="javascript">            success: <span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">              <span class="comment">// Object.keys(result).length 获取JSON对象的长度</span></span></span><br><span class="line"><span class="javascript">              <span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(result).length);</span></span><br><span class="line"><span class="javascript">              <span class="keyword">var</span> id=result.id;</span></span><br><span class="line"><span class="javascript">              <span class="keyword">var</span> name=result.name;</span></span><br><span class="line"><span class="javascript">              <span class="comment">// 拼成 dom对象</span></span></span><br><span class="line"><span class="javascript">              <span class="keyword">var</span> dom_li=<span class="string">"&lt;li&gt;"</span>+name+<span class="string">"&lt;/li&gt;"</span>;</span></span><br><span class="line"><span class="javascript">              <span class="keyword">var</span> $li=$(dom_li);<span class="comment">//转为jQuery对象</span></span></span><br><span class="line"><span class="javascript">              <span class="comment">//$li.data("id",id);</span></span></span><br><span class="line"><span class="javascript">              $(<span class="string">"#noteList"</span>).append($li);</span></span><br><span class="line"><span class="undefined">          	&#125;</span></span><br><span class="line"><span class="undefined">          &#125;);</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">      $(<span class="string">"#noteListBtn2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">"#noteList2"</span>).empty();</span></span><br><span class="line"><span class="javascript">        $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">          type: <span class="string">"post"</span>,</span></span><br><span class="line"><span class="javascript">          url: <span class="string">"http://localhost:8080/ajax-json/ajax2.do"</span>,</span></span><br><span class="line"><span class="javascript">          dataType: <span class="string">"json"</span>,</span></span><br><span class="line"><span class="javascript">          success: <span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 获取数组(json数组)的长度 result.length</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(result.length);</span></span><br><span class="line"><span class="javascript">            <span class="comment">//result 就是 服务器返回的json 串</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;result.length; ++i)&#123;</span></span><br><span class="line"><span class="javascript">              <span class="built_in">console</span>.log(i);</span></span><br><span class="line"><span class="javascript">              <span class="keyword">var</span> id=result[i].id;</span></span><br><span class="line"><span class="javascript">              <span class="keyword">var</span> name=result[i].name;</span></span><br><span class="line"><span class="javascript">              <span class="comment">// 拼成 dom对象</span></span></span><br><span class="line"><span class="javascript">              <span class="keyword">var</span> dom_li=<span class="string">"&lt;li&gt;"</span>+name+<span class="string">"&lt;/li&gt;"</span>;</span></span><br><span class="line"><span class="javascript">              <span class="keyword">var</span> $li=$(dom_li);<span class="comment">//转为jQuery对象</span></span></span><br><span class="line"><span class="javascript">              <span class="comment">//$li.data("id",id);</span></span></span><br><span class="line"><span class="javascript">              $(<span class="string">"#noteList2"</span>).append($li);</span></span><br><span class="line"><span class="undefined">          	&#125;</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">      &#125;);</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"noteListBtn"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"显示 NoteList"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"noteList"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"noteListBtn2"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"显示 NoteList对象数组"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"noteList2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>结果：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-12-01_164516.png" alt>  </p>
<h1 id="3-SpringMVC-返回-JSON"><a href="#3-SpringMVC-返回-JSON" class="headerlink" title="3 SpringMVC 返回 JSON"></a>3 SpringMVC 返回 JSON</h1><p>开发步骤：<br>1、 DispatchServlet<br>2、 HandlerMapping<br>3、 Controller (处理完返回一些数据)<br>4、 调用 spring 自带包jackson 将 Controller 返回结果转成 json 输出  </p>
<p>Controller:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mitrecx.controller;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> cn.mitrecx.domain.Note;</span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NoteListController</span> </span>&#123;</span><br><span class="line">  <span class="meta">@RequestMapping</span>(<span class="string">"/springjson.do"</span>)</span><br><span class="line">  <span class="meta">@ResponseBody</span> <span class="comment">//使 返回结果 转为 json. 有此标记就不会走ViewResolver了</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> List&lt;Note&gt; <span class="title">execute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Note&gt; list=<span class="keyword">new</span> ArrayList&lt;Note&gt;();</span><br><span class="line">    Note note1=<span class="keyword">new</span> Note(<span class="string">"01"</span>,<span class="string">"SpringMVC 返回json"</span>);</span><br><span class="line">    list.add(note1);</span><br><span class="line">    Note note2=<span class="keyword">new</span> Note(<span class="string">"02"</span>,<span class="string">"ajax是一种前端技术"</span>);</span><br><span class="line">    list.add(note2);</span><br><span class="line">    <span class="keyword">return</span> list;<span class="comment">//直接return，由Jackson 自动转成json</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@RequestMapping</span>(<span class="string">"/springjson2.do"</span>)</span><br><span class="line">  <span class="meta">@ResponseBody</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Note <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Note note=<span class="keyword">new</span> Note(<span class="string">"22"</span>,<span class="string">"json是一种数据格式"</span>);</span><br><span class="line">    <span class="comment">//domain类，List，Map都能转 JSON</span></span><br><span class="line">    <span class="keyword">return</span> note;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>domain类:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mitrecx.domain;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Note</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> String id;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Note</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Note</span><span class="params">(String id,String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.id=id;</span><br><span class="line">    <span class="keyword">this</span>.name=name;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> id;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.id = id;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>web.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>applicationContext:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:util</span>=<span class="string">"http://www.springframework.org/schema/util"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/beans/spring-beans-4.2.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context/spring-context-4.2.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/aop/spring-aop-4.2.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/tx/spring-tx-4.2.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/util</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/util/spring-util-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/mvc/spring-mvc-4.2.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- HandlerMapping --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- controller --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.mitrecx.controller"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><strong>demo.xml 和 上一例一样，只要改一下URL</strong>。  </p>
<p>结果：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-12-01_195618.png" alt>  </p>
<p><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-12-01_201506.png" alt>  </p>
<p>ajax 学习 完！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/27/Oracle学习6-存储过程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/27/Oracle学习6-存储过程/" itemprop="url">Oracle-学习6-存储过程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-27T09:26:26+08:00">
                2018-11-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-Oracle存储过程语法"><a href="#1-Oracle存储过程语法" class="headerlink" title="1 Oracle存储过程语法"></a>1 Oracle存储过程语法</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">OR</span> <span class="keyword">REPLACE</span>] <span class="keyword">PROCEDURE</span> 存储过程名[(参数[<span class="keyword">IN</span>|<span class="keyword">OUT</span>|<span class="keyword">IN</span> <span class="keyword">OUT</span>] 数据类型...)]</span><br><span class="line">&#123;<span class="keyword">AS</span>|<span class="keyword">IS</span>&#125;</span><br><span class="line">[变量声明块]</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">可执行部分;</span><br><span class="line">[EXCEPTION错误处理部分]</span><br><span class="line"><span class="keyword">END</span> [过程名];</span><br></pre></td></tr></table></figure>
<p>其中：<br>可选 <strong>关键字OR REPLACE</strong> 表示如果存储过程已经存在，则用新的存储过程覆盖，通常用于存储过程的重建。   </p>
<p><strong>参数</strong> 部分用于定义多个参数(如果没有参数，就可以省略)。<br>参数有三种形式：IN、OUT 和 IN OUT。<br>IN 按值传递，它 <strong>不允许</strong> 在存储过程中被重新赋值，<strong><font color="red">IN 参数被赋值会报错！</font></strong> 如果没有指明参数的形式，则默认为IN。<br><strong>参数的数据类型</strong> 只指明类型名即可，不需要指定宽度。<strong><font color="red">指定参数宽度会报错！</font></strong> 参数的宽度由外部调用者决定。  </p>
<p><strong>关键字 AS</strong> 也可以写成 IS，<strong>在此定义 局部变量</strong>。<br>可以理解为pl/sql的 declare关键字，用于声明变量。  </p>
<p>注：部分例子没有实际用处，只是为了说明存储过程的使用。  </p>
<hr>
<h2 id="1-1-利用存储过程循环插入"><a href="#1-1-利用存储过程循环插入" class="headerlink" title="1.1 利用存储过程循环插入"></a>1.1 利用存储过程循环插入</h2><p>示例：插入100条数据到test_cus表中<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">procedure</span> loop_insert</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">  cus_code varchar2(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.100</span> <span class="keyword">loop</span></span><br><span class="line">    cus_code := <span class="string">'1'</span>||<span class="keyword">lpad</span>(i,<span class="number">3</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> test_cus(cus_id,cus_name,cus_age)</span><br><span class="line">    <span class="keyword">values</span>(cus_code,<span class="string">'存储过程'</span>,<span class="number">100</span>);</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">  <span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--执行</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  loop_insert();</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure></p>
<p>结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1001	存储过程	100</span><br><span class="line">1002	存储过程	100</span><br><span class="line">1003	存储过程	100</span><br><span class="line">1004	存储过程	100</span><br><span class="line">1005	存储过程	100</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<p>注：<br>“ := “ 表示 赋值语句<br>“ = “ 判断是否相等<br>“ :variableName “ 表示 变量绑定  </p>
<p><a href="#id2_2">关于 for 循环</a>  </p>
<h2 id="1-2-存储过程参数"><a href="#1-2-存储过程参数" class="headerlink" title="1.2 存储过程参数"></a>1.2 存储过程参数</h2><p>以下存储过程可以正常执行：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">procedure</span> sp_test5</span><br><span class="line">(</span><br><span class="line">  <span class="comment">--不能指定参数的宽度</span></span><br><span class="line">  para1 <span class="keyword">in</span> <span class="keyword">out</span> varchar2</span><br><span class="line">)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">para1 :=<span class="string">'1234567890'</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--调用</span></span><br><span class="line"><span class="keyword">declare</span> p1 varchar2(<span class="number">10</span>):=<span class="string">'a'</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  sp_test5(p1);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure></p>
<p>如果把 p1 定义改为 varchar(1) :<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> p1 varchar2(<span class="number">10</span>):=<span class="string">'a'</span>;</span><br></pre></td></tr></table></figure></p>
<p>则会报错：<strong><font color="red">字符串缓冲区太小</font></strong><br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-28_145712.png" alt>  </p>
<p>以下存储过程 <strong>能正常运行</strong>。但如果去掉注释，则会报错，原因是 <strong><font color="red">不能给 IN 参数赋值</font></strong>。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">procedure</span> sp_test4</span><br><span class="line">(</span><br><span class="line">  para1 varchar2,</span><br><span class="line">  para2 <span class="keyword">out</span> varchar2,</span><br><span class="line">  para3 <span class="keyword">in</span> <span class="keyword">out</span> varchar2</span><br><span class="line">)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">  v_name varchar2(<span class="number">20</span>);</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="comment">--para1 := 'aaa';</span></span><br><span class="line">  <span class="comment">--para2 := 'bbb';</span></span><br><span class="line">  v_name :=<span class="string">' Oracle'</span>;</span><br><span class="line">  para3 := '你好';</span><br><span class="line">  dbms_output.put_line('输出:'||para3||v_name);</span><br><span class="line"><span class="keyword">end</span> sp_test4;</span><br><span class="line"></span><br><span class="line"><span class="comment">--调用</span></span><br><span class="line"><span class="keyword">declare</span> p1 varchar2(<span class="number">20</span>) := <span class="string">'hello1'</span>;</span><br><span class="line">p2 varchar2(20) := 'hello2';</span><br><span class="line">p3 varchar2(20) := 'hello3';</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  sp_test4(p1,p2,p3);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure></p>
<p>结果：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-28_151527.png" alt>  </p>
<p>再看一个例子：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test_user</span><br><span class="line">(</span><br><span class="line">  user_id <span class="built_in">int</span>,</span><br><span class="line">  user_Name varchar2(<span class="number">100</span>),</span><br><span class="line">  user_Passwd varchar2(<span class="number">100</span>),</span><br><span class="line">  user_Age  <span class="built_in">int</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test_user <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'jack'</span>,<span class="string">'xxx'</span>,<span class="number">23</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test_user <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">'rose'</span>,<span class="string">'xxx'</span>,<span class="number">21</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test_user <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">'kiki'</span>,<span class="string">'xxx'</span>,<span class="number">33</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test_user <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">'cherry'</span>,<span class="string">'xxx'</span>,<span class="number">24</span>);</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--存储过程：用于更改用户年龄</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">procedure</span> sp_update_age</span><br><span class="line">(</span><br><span class="line">  uname <span class="keyword">in</span> varchar2,</span><br><span class="line">  age <span class="keyword">in</span> <span class="built_in">int</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">update</span> test_user</span><br><span class="line">     <span class="keyword">set</span> user_age=age</span><br><span class="line">   <span class="keyword">where</span> user_name=uname;</span><br><span class="line">   <span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">end</span> sp_update_age;</span><br><span class="line"></span><br><span class="line"><span class="comment">--调用</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  sp_update_age(<span class="string">'jack'</span>,<span class="number">100</span>);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure></p>
<p>结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1	jack	xxx	100</span><br><span class="line">2	rose	xxx	21</span><br><span class="line">3	kiki	xxx	33</span><br><span class="line">4	cherry	xxx	24</span><br></pre></td></tr></table></figure></p>
<h1 id="2-控制语句"><a href="#2-控制语句" class="headerlink" title="2 控制语句"></a>2 控制语句</h1><h2 id="2-1-if-else"><a href="#2-1-if-else" class="headerlink" title="2.1 if else"></a>2.1 if else</h2><p>利用 if else 实现求一个数的绝对值：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">procedure</span> sp_test2(x <span class="keyword">in</span> <span class="keyword">out</span> <span class="built_in">number</span>)</span><br><span class="line"><span class="keyword">is</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">if</span> x&lt;<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">      x:= <span class="number">0</span>-x;</span><br><span class="line">    <span class="keyword">end</span>;</span><br><span class="line">  elsif x&gt;0 then  --注意 elsif</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">      x:= x;</span><br><span class="line">    <span class="keyword">end</span>;</span><br><span class="line">  else</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">      x:= <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">end</span>;</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line"><span class="keyword">end</span> sp_test2;</span><br><span class="line"></span><br><span class="line"><span class="comment">--调用 sp_test2</span></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">num</span> <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">num</span>:= <span class="number">-106</span>;</span><br><span class="line">    sp_test2(num);</span><br><span class="line">    dbms_output.put_line( 'num = ' || num );</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure></p>
<p>结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">num = 106</span><br></pre></td></tr></table></figure></p>
<h2 id="id2_2">2.2 for</h2>

<p>for 循环示例：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">x <span class="built_in">number</span> := <span class="number">100</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.5</span> <span class="keyword">loop</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">mod</span>(i,<span class="number">2</span>)=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      dbms_output.put_line(<span class="string">'i: '</span>||i||<span class="string">' is even.'</span>);</span><br><span class="line">    else</span><br><span class="line">      dbms_output.put_line('i: '||i||' is odd.');</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line">    x := x+1;</span><br><span class="line">    dbms_output.put_line('x: '||x);</span><br><span class="line">    dbms_output.put_line('');</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">  <span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure></p>
<p>结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">i: 1 is odd.</span><br><span class="line">x: 101</span><br><span class="line"></span><br><span class="line">i: 2 is even.</span><br><span class="line">x: 102</span><br><span class="line"></span><br><span class="line">i: 3 is odd.</span><br><span class="line">x: 103</span><br><span class="line"></span><br><span class="line">i: 4 is even.</span><br><span class="line">x: 104</span><br><span class="line"></span><br><span class="line">i: 5 is odd.</span><br><span class="line">x: 105</span><br></pre></td></tr></table></figure></p>
<h2 id="2-3-while"><a href="#2-3-while" class="headerlink" title="2.3 while"></a>2.3 while</h2><p>while 示例：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">procedure</span> sp_test3( i <span class="keyword">in</span> <span class="keyword">out</span> <span class="built_in">number</span>)</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">while</span> i&lt;=<span class="number">100</span> <span class="keyword">loop</span></span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">      i:=i+<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">end</span>;</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line"><span class="keyword">end</span> sp_test3;</span><br><span class="line"></span><br><span class="line"><span class="comment">--调用 sp_test3</span></span><br><span class="line"><span class="keyword">declare</span> t3 <span class="built_in">number</span> := <span class="number">2</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  sp_test3(t3);</span><br><span class="line">  dbms_output.put_line(t3);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure></p>
<p>结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">102</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/26/Oracle学习5-序列/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/26/Oracle学习5-序列/" itemprop="url">Oracle-学习5-序列</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-26T19:54:32+08:00">
                2018-11-26
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="创建序列-sequence"><a href="#创建序列-sequence" class="headerlink" title="创建序列 sequence"></a>创建序列 sequence</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">SEQUENCE</span> 序列名</span><br><span class="line"></span><br><span class="line">　　[<span class="keyword">INCREMENT</span> <span class="keyword">BY</span> n]</span><br><span class="line"></span><br><span class="line">　　[<span class="keyword">START</span> <span class="keyword">WITH</span> n]</span><br><span class="line"></span><br><span class="line">　　[&#123;MAXVALUE/ <span class="keyword">MINVALUE</span> n| <span class="keyword">NOMAXVALUE</span>&#125;]</span><br><span class="line"></span><br><span class="line">　　[&#123;<span class="keyword">CYCLE</span>|<span class="keyword">NOCYCLE</span>&#125;]</span><br><span class="line"></span><br><span class="line">　　[&#123;<span class="keyword">CACHE</span> n| NOCACHE&#125;];</span><br></pre></td></tr></table></figure>
<p>1、<br><strong><font color="#00b33c">Increment by n</font></strong> ， 步长为n<br><strong>默认为 1</strong></p>
<p>2、<br><strong><font color="#00b33c">Stat with n</font></strong> ， 开始值为n<br><strong>默认为 1</strong>  </p>
<p>3、<br><strong><font color="#00b33c">Maxvalue n</font></strong> ， 最大值<br><strong><font color="#00b33c">Minvalue n</font></strong> ，  最小值<br><strong><font color="#00b33c">NOMAXVALUE</font></strong> ， 无最值(最大：10的27次方，最小：-10的26次方)<br><strong>默认 无最值</strong>  </p>
<p>4、<br><strong><font color="#00b33c">CYCLE</font></strong> 循环，递增或递减过最值时，回到起始值循环<br><strong><font color="#00b33c">NOCYCLE</font></strong> 非循环，递增或递减过最值时，报错。<br><strong>默认 非循环</strong>  </p>
<p>5、<br><strong><font color="#00b33c">CACHE n</font></strong> 缓冲， 定义存放序列的内存块的大小。<br><strong>默认为 20</strong>   </p>
<h1 id="访问序列"><a href="#访问序列" class="headerlink" title="访问序列"></a>访问序列</h1><p>访问序列的下一个值：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 序列名.nextVal <span class="keyword">from</span> dual;</span><br></pre></td></tr></table></figure></p>
<p>访问序列当前值：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 序列名.currVal <span class="keyword">from</span> dual;</span><br></pre></td></tr></table></figure></p>
<p>注：<br>新创建的 序列， 只能 在nextVal一次之后，才能使用currVal。  </p>
<h1 id="修改序列"><a href="#修改序列" class="headerlink" title="修改序列"></a>修改序列</h1><p><strong>Oracle 无法直接修改序列的 起始值</strong><br><strong>改变序列的初始值</strong> 只能通过 <strong>先删除序列</strong> 再重建序列来实现    </p>
<p>修改序列的步长为 1000 ：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">sequence</span> 序列名</span><br><span class="line"><span class="keyword">increment</span> <span class="keyword">by</span> <span class="number">1000</span>;</span><br></pre></td></tr></table></figure></p>
<p>最值，循环，缓冲 都能被修改。<br>值得注意的是，<strong>循环</strong> 和 <strong>缓冲</strong> 必须满足下面不等式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cache &lt; CEIL(maxValue-minValue)/ABS(increment)</span><br></pre></td></tr></table></figure></p>
<p>如果想要把序列的当前值 +1000，可以先修改步长为1000，再nextVal，再把步长改为原值。   </p>
<h1 id="删除序列"><a href="#删除序列" class="headerlink" title="删除序列"></a>删除序列</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">sequence</span> 序列名;</span><br></pre></td></tr></table></figure>
<p>删除之后，序列将不能被引用。  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/25/Oracle学习4-高级查询/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/25/Oracle学习4-高级查询/" itemprop="url">Oracle-学习4-高级查询</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-25T13:45:54+08:00">
                2018-11-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Oracle 高级查询：  </p>
<ul>
<li>子查询(不做说明)  </li>
<li><a href="#head1">分页查询</a></li>
<li><a href="#head2">decode 函数</a></li>
<li><a href="#head3">排序函数</a></li>
<li><a href="#head4">高级分组</a></li>
<li><a href="#head5">集合</a></li>
</ul>
<h1 id="head1">1 分页查询</h1>

<p>分页查询的思想：”勤拿少取”    </p>
<p>分页查询步骤：<br>1、 排序(非必要)<br>2、 编号<br>3、 取范围  </p>
<p>例如，对 emp表 进行分页查询。<br>emp表 有如下记录：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-27_142648.png" alt>   </p>
<h2 id="1-1-排序"><a href="#1-1-排序" class="headerlink" title="1.1 排序"></a>1.1 排序</h2><p>按照 入职日期 排序：   </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *</span><br><span class="line">  <span class="keyword">from</span> emp</span><br><span class="line"> <span class="keyword">order</span> <span class="keyword">by</span> hire_date</span><br></pre></td></tr></table></figure>
<h2 id="1-2-编号"><a href="#1-2-编号" class="headerlink" title="1.2 编号"></a>1.2 编号</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--先排序，再编号</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">rownum</span> rn,e.*</span><br><span class="line">  <span class="keyword">from</span> (</span><br><span class="line">     <span class="keyword">select</span> *</span><br><span class="line">     <span class="keyword">from</span> emp</span><br><span class="line">     <span class="keyword">order</span> <span class="keyword">by</span> hire_date) e</span><br></pre></td></tr></table></figure>
<p>错误做法：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--排序与编号同时进行</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">rownum</span> rn,emp.*</span><br><span class="line">  <span class="keyword">from</span> emp</span><br><span class="line"> <span class="keyword">order</span> <span class="keyword">by</span> hire_date</span><br></pre></td></tr></table></figure></p>
<p>错误做法的结果：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-27_143212.png" alt><br>由上图可见，<strong>rownum 不能和 order by 写在一个查询语句中</strong>。</p>
<h2 id="1-3-取范围"><a href="#1-3-取范围" class="headerlink" title="1.3 取范围"></a>1.3 取范围</h2><p>假设当前是第 n 页， 一页的条数为 pageSize， 则页数的范围：<br>start: ( n-1 ) * pageSize + 1<br>end: pageSize * n</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--pageSize 取 6</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> (</span><br><span class="line">       <span class="keyword">select</span> <span class="keyword">rownum</span> rn,e.*</span><br><span class="line">       <span class="keyword">from</span>(</span><br><span class="line">           <span class="keyword">select</span> *</span><br><span class="line">           <span class="keyword">from</span> emp</span><br><span class="line">           <span class="keyword">order</span> <span class="keyword">by</span> hire_date) e)</span><br><span class="line"> <span class="keyword">where</span> rn <span class="keyword">between</span> <span class="number">1</span> <span class="keyword">and</span> <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> (</span><br><span class="line">       <span class="keyword">select</span> <span class="keyword">rownum</span> rn,e.*</span><br><span class="line">       <span class="keyword">from</span>(</span><br><span class="line">           <span class="keyword">select</span> *</span><br><span class="line">           <span class="keyword">from</span> emp</span><br><span class="line">           <span class="keyword">order</span> <span class="keyword">by</span> hire_date) e)</span><br><span class="line"> <span class="keyword">where</span> rn <span class="keyword">between</span> <span class="number">7</span> <span class="keyword">and</span> <span class="number">12</span>;</span><br></pre></td></tr></table></figure>
<h1 id="head2">2 decode 函数</h1>

<p><strong>DECODE函数 的作用和 java 中的 switch-case 一样</strong>。  </p>
<p>计算员工的奖金：如果部门号为 01，奖金为 [薪水*2]。如果部门号为 02，奖金为 [薪水*10]。其他部门，奖金额等于薪水值。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> emp.*,<span class="keyword">decode</span>(department_no,</span><br><span class="line">                                 <span class="string">'01'</span>,salary*<span class="number">2</span>,</span><br><span class="line">                                 <span class="string">'02'</span>,salary*<span class="number">10</span>,</span><br><span class="line">                                 salary) bonus</span><br><span class="line"><span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure></p>
<p><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-27_223602.png" alt>  </p>
<p>Oracle 还提供了 case-when-then-else-end 语句，功能和 DECODE 类似：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> emp.*,</span><br><span class="line">       <span class="keyword">case</span> department_no</span><br><span class="line">         <span class="keyword">when</span> <span class="string">'01'</span> <span class="keyword">then</span> salary*<span class="number">2</span></span><br><span class="line">         <span class="keyword">when</span> <span class="string">'02'</span> <span class="keyword">then</span> salary*<span class="number">10</span></span><br><span class="line">         <span class="keyword">else</span> salary <span class="keyword">end</span></span><br><span class="line">       bonus</span><br><span class="line"><span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="keyword">select</span> app.*,</span><br><span class="line">  <span class="keyword">case</span></span><br><span class="line">    <span class="keyword">when</span> app.channel_type=<span class="string">'01'</span> <span class="keyword">then</span> <span class="string">'网上银行'</span></span><br><span class="line">    <span class="keyword">when</span> app.channel_type=<span class="string">'02'</span> <span class="keyword">then</span> <span class="string">'手机银行'</span></span><br><span class="line">    <span class="keyword">else</span> <span class="string">'其他渠道'</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  渠道</span><br><span class="line"><span class="keyword">from</span> loan_app_info app</span><br></pre></td></tr></table></figure></p>
<p><strong>DECODE 与CASE WHEN 的比较:</strong>  </p>
<ol>
<li>DECODE 只有Oracle 才有，其它数据库不支持。<br>CASE WHEN的用法， Oracle、SQL Server、 MySQL 都支持。  </li>
<li>DECODE 只能用做相等判断，但是可以配合sign函数进行大于，小于，等于的判断。<br>CASE when可用于 =，&gt;=，&lt;，&lt;=，&lt;&gt;，is null，is not null 等的判断。  </li>
<li>DECODE 使用其来比较简洁，CASE 虽然复杂但更为灵活。  </li>
<li>在decode中，null和null是相等的。<br>在case when中，只能用is null来判断。  </li>
</ol>
<h1 id="head3">3 排序函数</h1>

<h2 id="3-1-普通排序"><a href="#3-1-普通排序" class="headerlink" title="3.1 普通排序"></a>3.1 普通排序</h2><p>对 emp表 按工资排序：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.*, <span class="keyword">rownum</span> <span class="keyword">as</span> 序号</span><br><span class="line">  <span class="keyword">from</span> (<span class="keyword">select</span> *</span><br><span class="line">          <span class="keyword">from</span> emp</span><br><span class="line">          <span class="keyword">where</span> salary <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line">         <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>) e;</span><br></pre></td></tr></table></figure></p>
<p><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-27_231815.png" alt>  </p>
<h2 id="3-2-组内排序"><a href="#3-2-组内排序" class="headerlink" title="3.2 组内排序"></a>3.2 组内排序</h2><p><code>row_number() over()</code> 函数， 对 emp表按 部门编号 分组，再组内排序：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--row_number 生成组内 唯一且连续的编号</span></span><br><span class="line"><span class="keyword">select</span> emp.*, row_number() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> department_no <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>) rk</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> salary <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure></p>
<p><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-27_232515.png" alt>  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--rank over,s 组内不连续且不唯一的编号</span></span><br><span class="line"><span class="keyword">select</span> emp.*, <span class="keyword">rank</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> department_no <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>) rk</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> salary <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--dense_rank over, 组内连续但不唯一的编号</span></span><br><span class="line"><span class="keyword">select</span> emp.*, <span class="keyword">dense_rank</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> department_no <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>) rk</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> salary <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>
<h1 id="head4">4 高级分组方法</h1>

<p>高级分组方法：rollup,<strong>grouuping sets</strong>(重点), cube    </p>
<p>建立一张营业额表：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> SALES_TAB</span><br><span class="line">(</span><br><span class="line">  year_id     <span class="built_in">NUMBER</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  month_id    <span class="built_in">NUMBER</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  day_id      <span class="built_in">NUMBER</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">  sales_value <span class="built_in">NUMBER</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>插入 1000 条数据，数据是每天的营业额(每天可能有多笔营业收入):<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-28_091712.png" alt>  </p>
<h2 id="4-1-group-by-分组"><a href="#4-1-group-by-分组" class="headerlink" title="4.1 group by 分组"></a>4.1 group by 分组</h2><p>group by 是最基础，也是最重要的分组方法。<br>计算每天的营业额：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> year_id,month_id,day_id,<span class="keyword">sum</span>(sales_value)</span><br><span class="line">  <span class="keyword">from</span> sales_tab</span><br><span class="line"> <span class="keyword">group</span> <span class="keyword">by</span> year_id, month_id,day_id</span><br><span class="line"> <span class="keyword">order</span> <span class="keyword">by</span> year_id,month_id,day_id;</span><br></pre></td></tr></table></figure></p>
<h2 id="4-2-group-by-rollup-分组"><a href="#4-2-group-by-rollup-分组" class="headerlink" title="4.2 group by rollup 分组"></a>4.2 group by rollup 分组</h2><p>按 <strong>年月日</strong> 分组，再按 <strong>年月</strong> 分组，再按 <strong>年</strong> 分组，<strong>总的一组</strong>。(一共4个分组)  ：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> year_id,month_id,day_id,<span class="keyword">sum</span>(sales_value)</span><br><span class="line">  <span class="keyword">from</span> sales_tab</span><br><span class="line"> <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">rollup</span>( year_id, month_id,day_id)</span><br><span class="line"> <span class="keyword">order</span> <span class="keyword">by</span> year_id,month_id,day_id;</span><br></pre></td></tr></table></figure></p>
<p>输出结果片段：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-28_094354.png" alt><br>注意：<br><strong>rollup</strong> 内部的字段顺序决定了 分组结果。<br>例如 rollup(1,2,3), 分组结果：123， 12， 1，总表一组  </p>
<h2 id="4-3-group-by-grouping-sets-分组"><a href="#4-3-group-by-grouping-sets-分组" class="headerlink" title="4.3  group by grouping sets 分组"></a>4.3  group by grouping sets 分组</h2><p><strong>grouping sets</strong> 很灵活，分组结果可以自己指定。<br>按 <strong>年月日</strong> 分组，再按 <strong>年</strong> 分组：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> year_id,month_id,day_id,<span class="keyword">sum</span>(sales_value)</span><br><span class="line"><span class="keyword">from</span> sales_tab</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">     <span class="keyword">grouping</span> <span class="keyword">sets</span>(( year_id, month_id，day_id),</span><br><span class="line">                   (year_id)</span><br><span class="line">     )</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> year_id,month_id,day_id;</span><br></pre></td></tr></table></figure></p>
<h2 id="4-4-group-by-cube-分组"><a href="#4-4-group-by-cube-分组" class="headerlink" title="4.4 group by cube 分组"></a>4.4 group by cube 分组</h2><p><code>cube(年,月,日)</code> 分成如下 8 种组合：<br>年月日，年月，年，<br>年日，月日，<br>月，日，<br>总。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> year_id,month_id,day_id,<span class="keyword">sum</span>(sales_value)</span><br><span class="line">  <span class="keyword">from</span> sales_tab</span><br><span class="line"> <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">cube</span>( year_id, month_id,day_id)</span><br><span class="line"> <span class="keyword">order</span> <span class="keyword">by</span> year_id,month_id,day_id;</span><br></pre></td></tr></table></figure></p>
<h1 id="head5">5 集合</h1>

<p>集合运算符：<br><strong>union/union all</strong> 并集<br><strong>intersect</strong> 交集<br><strong>minus</strong> 差集  </p>
<ol>
<li><p>union求并集，公共部分只 <strong>包含一次</strong>  </p>
</li>
<li><p>union all求集并，公共部分 <strong>包含二次</strong>  </p>
</li>
<li><p>intersect求交集，只有公共部分  </p>
</li>
<li><p>minus求差集，例如集合A减集合B  </p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/24/Oracle学习3-关联查询/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/24/Oracle学习3-关联查询/" itemprop="url">Oracle-学习3-关联查询</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-24T17:55:00+08:00">
                2018-11-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Oracle数据库 是关系型数据库。表与表之间可以存在关系(连接条件)。  </p>
<p>Oracle数据库的关联查询有两种：内连接(等值连接、自然连接) 和 外连接(左外，右外，全外)。  </p>
<p>先建立两张表如下：<br>支用申请信息表<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> loan_app_info(</span><br><span class="line">app_no varchar2(<span class="number">25</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">channel_type varchar2(<span class="number">2</span>),</span><br><span class="line">loan_no varchar2(<span class="number">30</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">comment</span> <span class="keyword">on</span> <span class="keyword">table</span> loan_app_info</span><br><span class="line"><span class="keyword">is</span> <span class="string">'支用申请信息表'</span>;</span><br><span class="line"><span class="keyword">comment</span> <span class="keyword">on</span> <span class="keyword">column</span> loan_app_info.app_no</span><br><span class="line"><span class="keyword">is</span> <span class="string">'申请流水号'</span>;</span><br><span class="line"><span class="keyword">comment</span> <span class="keyword">on</span> <span class="keyword">column</span> loan_app_info.channel_type</span><br><span class="line"><span class="keyword">is</span> <span class="string">'渠道类型'</span>;</span><br><span class="line"><span class="keyword">comment</span> <span class="keyword">on</span> <span class="keyword">column</span> loan_app_info.loan_no</span><br><span class="line"><span class="keyword">is</span> <span class="string">'网贷生成出账号'</span>;</span><br></pre></td></tr></table></figure></p>
<p>网贷借据表<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> acc_loan(</span><br><span class="line">bill_no <span class="built_in">varchar</span>(<span class="number">30</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">contract_no varchar2(<span class="number">30</span>),</span><br><span class="line">prd_name <span class="built_in">varchar</span>(<span class="number">30</span>),</span><br><span class="line">prd_type <span class="built_in">varchar</span>(<span class="number">6</span>),</span><br><span class="line">cus_id varchar2(<span class="number">18</span>),</span><br><span class="line">cus_name varchar2(<span class="number">100</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">comment</span> <span class="keyword">on</span> <span class="keyword">table</span> acc_loan</span><br><span class="line"><span class="keyword">is</span> <span class="string">'网贷借据表'</span>;</span><br><span class="line"><span class="keyword">comment</span> <span class="keyword">on</span> <span class="keyword">column</span> acc_loan.bill_no</span><br><span class="line"><span class="keyword">is</span> <span class="string">'借据编号'</span>;</span><br><span class="line"><span class="keyword">comment</span> <span class="keyword">on</span> <span class="keyword">column</span> acc_loan.contract_no</span><br><span class="line"><span class="keyword">is</span> <span class="string">'合同编号'</span>;</span><br><span class="line"><span class="keyword">comment</span> <span class="keyword">on</span> <span class="keyword">column</span> acc_loan.prd_name</span><br><span class="line"><span class="keyword">is</span> <span class="string">'产品名称'</span>;</span><br><span class="line"><span class="keyword">comment</span> <span class="keyword">on</span> <span class="keyword">column</span> acc_loan.prd_type</span><br><span class="line"><span class="keyword">is</span> <span class="string">'产品类型'</span>;</span><br><span class="line"><span class="keyword">comment</span> <span class="keyword">on</span> <span class="keyword">column</span> acc_loan.cus_id</span><br><span class="line"><span class="keyword">is</span> <span class="string">'客户号'</span>;</span><br><span class="line"><span class="keyword">comment</span> <span class="keyword">on</span> <span class="keyword">column</span> acc_loan.cus_name</span><br><span class="line"><span class="keyword">is</span> <span class="string">'客户名称'</span>;</span><br></pre></td></tr></table></figure></p>
<p>两张表存在 <strong>关联关系</strong>：loan_app_info.loan_no 与 acc_loan.bill_no (这两个字段来源相同)。  </p>
<p>插入如下数据：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/loan_app_info.png" alt>  </p>
<p><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/acc_loan.png" alt>  </p>
<p>loan_app_info有 <strong>9</strong> 条记录，acc_loan有 <strong>8</strong> 条记录。两张表里能关联上的记录有 <strong>6</strong> 条。  </p>
<p>两表的 <strong>笛卡尔积</strong> 会有 72(9*8) 条记录:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--笛卡尔积</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> loan_app_info,acc_loan ;</span><br></pre></td></tr></table></figure></p>
<p>注：笛卡尔积 通常是对数据查询危害极大的操作。</p>
<h1 id="1-内连接"><a href="#1-内连接" class="headerlink" title="1 内连接"></a>1 内连接</h1><p>内连接有两种： 等值连接 和 自然连接。  </p>
<h2 id="1-1-等值连接"><a href="#1-1-等值连接" class="headerlink" title="1.1 等值连接"></a>1.1 等值连接</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--内连接-等值连接1</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> loan_app_info app, acc_loan <span class="keyword">acc</span></span><br><span class="line"><span class="keyword">where</span> app.loan_no = acc.bill_no;</span><br><span class="line"><span class="comment">--结果：6条记录</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--内连接-等值连接2</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> loan_app_info app <span class="keyword">inner</span> <span class="keyword">join</span> acc_loan <span class="keyword">acc</span> <span class="keyword">on</span>(app.loan_no=acc.bill_no);</span><br><span class="line"><span class="comment">--结果：6条记录</span></span><br></pre></td></tr></table></figure>
<p><code>“inner”</code> 和 <code>“()”</code>均可以省略。    </p>
<h2 id="1-2-自然连接"><a href="#1-2-自然连接" class="headerlink" title="1.2 自然连接"></a>1.2 自然连接</h2><p>自然连接 会自动寻找两张表中 <strong>列名相同</strong> 的列 做 <strong>等值连接</strong>。<br>自然连接的条件：两张表 有且只有一列列名相同才能用自然连接。  </p>
<p>如果不满足上述条件，自然连接的结果是笛卡尔积。  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--内连接-自然连接</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> loan_app_info <span class="keyword">natural</span> <span class="keyword">join</span> acc_loan;</span><br><span class="line"><span class="comment">--因为列名不同，结果是笛卡尔积</span></span><br></pre></td></tr></table></figure>
<p>我的建议： 不要使用自然连接，因为不够灵活。</p>
<h1 id="2-外连接"><a href="#2-外连接" class="headerlink" title="2 外连接"></a>2 外连接</h1><p>外连接包括：左外连接，右外连接，全外连接。  </p>
<h2 id="2-1-左外连接"><a href="#2-1-左外连接" class="headerlink" title="2.1 左外连接"></a>2.1 左外连接</h2><p>以左边的表为主，即左边的表要全包含，右边表没有的记录可以补null。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--外连接-左外连接</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> loan_app_info app <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> acc_loan <span class="keyword">acc</span> <span class="keyword">on</span>(app.loan_no=acc.bill_no);</span><br><span class="line"><span class="comment">--结果：9条数据(不是6条)。左边表loan_app_info的数据全包含</span></span><br></pre></td></tr></table></figure></p>
<p><code>“outer”</code> 和 <code>“()”</code>均可以省略。  </p>
<p>结果：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-26_185254.png" alt>  </p>
<h2 id="2-2-右外连接"><a href="#2-2-右外连接" class="headerlink" title="2.2 右外连接"></a>2.2 右外连接</h2><p>以右为主，左不全补null。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--外连接-右外连接</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> loan_app_info app <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> acc_loan <span class="keyword">acc</span> <span class="keyword">on</span>(app.loan_no=acc.bill_no);</span><br><span class="line"><span class="comment">--结果：8条数据，右边表数据全包含</span></span><br></pre></td></tr></table></figure></p>
<p><code>“outer”</code> 和 <code>“()”</code>均可以省略。  </p>
<h2 id="2-3-全外连接"><a href="#2-3-全外连接" class="headerlink" title="2.3 全外连接"></a>2.3 全外连接</h2><p>两边表的数据都要全包含。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--外连接-全外连接</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> loan_app_info app <span class="keyword">full</span> <span class="keyword">outer</span> <span class="keyword">join</span> acc_loan <span class="keyword">acc</span> <span class="keyword">on</span>(app.loan_no=acc.bill_no);</span><br><span class="line"><span class="comment">--结果：11条数据(6+ 9-6 + 8-6 =11)</span></span><br></pre></td></tr></table></figure></p>
<p><code>“outer”</code> 和 <code>“()”</code>均可以省略。  </p>
<h1 id="3-自连接"><a href="#3-自连接" class="headerlink" title="3 自连接"></a>3 自连接</h1><p>自连接 一般用于 一张表内的 <strong>字段间</strong> 存在关联关系。  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/23/systemctl和service/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/23/systemctl和service/" itemprop="url">systemctl 和 service</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-23T15:59:01+08:00">
                2018-11-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>内核启动第一个用户空间进程是由 <strong>init</strong> (/sbin/init)开始的。它主要负责 启动和终止系统中的基础服务进程。  </p>
<p>linux系统中主要的 <strong>init版本</strong> 有如下:<br><strong><font color="red">System V init</font></strong>:    传统的init,大多数的linux发行版都会兼容。<br><strong><font color="green">Systemd</font></strong>:    新的init,很多linux发行版都已经或者计划转向Systemd。    </p>
<p>查看 1 号进程：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-26_150028.png" alt><br>/sbin/init 是 /lib/systemd/systemd 的链接文件。<strong>系统的 1 号进程的确是 systemd</strong>，只不过在 ubuntu 系统中被起了个别名叫 /sbin/init。<br>注：0号进程-&gt;1号内核进程-&gt;1号用户进程（init进程）-&gt;getty进程-&gt;shell进程。  </p>
<h1 id="1-service-命令"><a href="#1-service-命令" class="headerlink" title="1 service 命令"></a>1 service 命令</h1><p><strong>service - run a <font color="red">System V init</font> script</strong>  </p>
<p>service是一个命令，服务配置文件存放目录/etc/init.d/。<br>service是去 /etc/init.d 目录下执行相关脚本程序。   </p>
<p><strong>service 的用法</strong>  </p>
<p>service 操作：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service SCRIPT COMMAND [OPTIONS]</span><br></pre></td></tr></table></figure></p>
<p>SCRIPT 即是 <strong>/etc/init.d</strong> 目录下的文件。<br>COMMAND 包含：<strong>start, stop, restart, reload, status.</strong><br>例如：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#通过ssh.service，输出服务类型 unit 的基本信息</span></span><br><span class="line">service ssh status</span><br></pre></td></tr></table></figure></p>
<p>结果：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-26_143027.png" alt><br>1、第一行是对 unit 的描述。  </p>
<p>2、Loaded 描述操作系统启动时会不会启动这个服务：<br><strong>enabled</strong>： 表示开机时启动。<br><strong>disabled</strong>： 表示开机时不启动。<br><strong>static</strong>：这个 unit 不可以自己启动，不过可能会被其它的 enabled 的服务来唤醒。<br><strong>mask</strong>：这个 unit 无论如何都无法被启动！因为已经被强制注销。可通过 systemctl unmask 改回原来的状态。</p>
<p>3、 active 的状态：<br><strong>active (running)</strong>： 表示服务正在运行中。<br><strong>inactive (dead)</strong>： 表示服务当前没有运行。<br><strong>active (exited)</strong>：仅执行一次就正常结束的服务，目前并没有任何程序在系统中执行。<br>举例来说，开机或者是挂载时才会进行一次的 quotaon 功能，就是这种模式。<br>Quotaon 不需要一直执行，只在执行一次之后，就交给文件系统去自行处理。<br>通常用 bash shell 写的小型服务，大多是属于这种类型。<br><strong>active (waiting)</strong>：正在执行当中，不过还再等待其他的事件才能继续处理。举例来说，打印的相关服务就是这种状态。</p>
<p>service 查看所有 <strong>服务</strong> 状态：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service --status-all</span><br></pre></td></tr></table></figure></p>
<p>其中 “+” 代表服务正在运行， “-“ 代表服务处于关闭状态，”?” 代表根本没有状态。  </p>
<h1 id="2-systemctl-命令"><a href="#2-systemctl-命令" class="headerlink" title="2 systemctl 命令"></a>2 systemctl 命令</h1><p><strong>systemctl - Control the <font color="green">systemd</font> system and service manager</strong>  </p>
<p><strong>ubuntu自从15.04版本以后都使用了systemd。</strong></p>
<p>systemctl 用法：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl [OPTIONS...] COMMAND [NAME...]</span><br></pre></td></tr></table></figure></p>
<p>COMMAND 包含：start, stop, restart, reload, status.<br>NAME 是 服务名。  </p>
<p>例：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看 ssh服务的状态</span></span><br><span class="line">systemctl status ssh</span><br><span class="line"></span><br><span class="line"><span class="comment">#打开服务</span></span><br><span class="line">systemctl start ssh</span><br><span class="line"><span class="comment">#关闭服务</span></span><br><span class="line">systemctl stop ssh</span><br><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">systemctl restart ssh</span><br><span class="line"><span class="comment">#不中断正常功能下重新加载服务</span></span><br><span class="line">systemctl reload ssh</span><br><span class="line"><span class="comment">#设置服务的开机自启动</span></span><br><span class="line">systemctl <span class="built_in">enable</span> ssh</span><br><span class="line"><span class="comment">#关闭服务的开机自启动</span></span><br><span class="line">systemctl <span class="built_in">disable</span> ssh</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看活跃的单元</span></span><br><span class="line">systemctl list-units</span><br></pre></td></tr></table></figure></p>
<p>查看默认的 target：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl get-default</span><br></pre></td></tr></table></figure></p>
<p>systemd 也提供了几个简单的指令用来切换操作模式:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl poweroff  <span class="comment"># 系统关机            </span></span><br><span class="line">systemctl reboot    <span class="comment"># 重新开机            </span></span><br><span class="line">systemctl <span class="built_in">suspend</span>   <span class="comment"># 进入暂停模式        </span></span><br><span class="line">systemctl hibernate  <span class="comment"># 进入休眠模式</span></span><br></pre></td></tr></table></figure></p>
<p><strong>suspend</strong>：暂停模式会将系统的状态保存到内存中，然后关闭掉大部分的系统硬件，当然，并没有实际关机。当用户按下唤醒机器的按钮，系统数据会从内存中回复，然后重新驱动被大部分关闭的硬件，所以唤醒系统的速度比较快。<br><strong>hibernate</strong>：休眠模式则是将系统状态保存到硬盘当中，保存完毕后，将计算机关机。当用户尝试唤醒系统时，系统会开始正常运行，然后将保存在硬盘中的系统状态恢复回来。因为数据需要从硬盘读取，因此唤醒的速度比较慢</p>
<p>检查 unit 之间的依赖性:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-dependencies [unit] [--reverse]  </span><br><span class="line"><span class="comment">#--reverse 会反向追踪是谁在使用这个 unit</span></span><br></pre></td></tr></table></figure></p>
<p>例如：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-dependencies default.target</span><br></pre></td></tr></table></figure></p>
<p><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-26_145027.png" alt><br>当前运行在 graphical.target 下，它由一个长长的依赖列表(上图并未展示所有的项目)，其中最重要的依赖项目为 multi-user.target。可以使用 –reverse 选项查看 multi-user.target unit 被谁使用。</p>
<p>总结:<br>systemctl 提供了管理 systemd 和系统服务的众多命令。<br>systemd 是某些linux发行版用来代替系统启动 init 和 service 的一个新的系统工具，同时兼容init。  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/20/JavaScript笔记3-AJAX/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/20/JavaScript笔记3-AJAX/" itemprop="url">JavaScript笔记3-AJAX</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-20T21:41:34+08:00">
                2018-11-20
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>AJAX</strong> = Asynchronous JavaScript and XML（<strong>异步的 JavaScript 和 XML</strong>）。  </p>
<p>xml 和 json ：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">person</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>mitre<span class="tag">&lt;/<span class="name">mitre</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">age</span>&gt;</span>24<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">person</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"name"</span>:<span class="string">"mitre"</span>, <span class="attr">"age"</span>:<span class="string">"24"</span>&#125;</span><br></pre></td></tr></table></figure>
<p>AJAX 通过 XMLHttpRequest 对象发请求：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-21_235128.png" alt>  </p>
<p>普通交互模式（特点：全页面刷新 + 请求与响应同步处理(一个请求发送必须等到对应的相应回来才能再发下一个请求)）：   </p>
<ol>
<li>浏览器发请求   </li>
<li>Tomcat服务器 处理请求返回响应结果给浏览器   </li>
<li>浏览器显示结果   </li>
</ol>
<p>AJAX交互模式（特点：局部刷新 + 请求与响应异步处理）：   </p>
<ol>
<li>浏览器发请求   </li>
<li><strong><font color="#bf00ff">XMLHttpRequest 发请求</font></strong>   </li>
<li>Tomcat服务器 处理请求返回响应结果给浏览器    </li>
<li><strong><font color="#bf00ff">XMLHttpRequest 接收响应</font></strong>  </li>
<li>浏览器显示结果   </li>
</ol>
<p>AJAX 局部刷新，异步处理 <strong>提高了程序交互效率</strong>。  </p>
<p>AJAX 技术：  </p>
<ul>
<li>基于 JS 发请求和响应处理。  </li>
<li><strong>以 XMLHttpRequest对象 为核心</strong>。  </li>
<li>涉及 HTML，CSS 页面渲染技术。  </li>
<li>涉及 XML，JSON 等数据交互格式。  </li>
</ul>
<hr>
<h1 id="1-普通交互模式"><a href="#1-普通交互模式" class="headerlink" title="1 普通交互模式"></a>1 普通交互模式</h1><p>web.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span> <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"3.1"</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">display-name</span>&gt;</span>ajax01<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>cn.mitrecx.DemoServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo1.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>DemoServlet.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mitrecx;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    request.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">    response.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</span><br><span class="line">    PrintWriter out = response.getWriter();</span><br><span class="line">    out.println(<span class="string">"上证指数:2645.43"</span>);</span><br><span class="line">    out.flush();</span><br><span class="line">    out.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>demo1.jsp<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@page</span> <span class="attr">pageEncoding</span>=<span class="string">"utf-8"</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=utf-8"</span> %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"demo1.do"</span> &gt;</span>查看上证指数<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>股市新闻<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>时间<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>新一代股神mitre<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>2018-11-22<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>股市肿么了<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>2018-11-21<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">tr</span>&gt;</span>			</span><br><span class="line">			<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>大海你真美<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>2018-11-21<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">tr</span>&gt;</span>			</span><br><span class="line">		<span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>结果：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-22_225259.png" alt>   </p>
<h1 id="2-AJAX交互模式"><a href="#2-AJAX交互模式" class="headerlink" title="2 AJAX交互模式"></a>2 AJAX交互模式</h1><p>web.xml 和 DemoServlet.java 与普通交互模式相同。  </p>
<p>jsp文件做以区分，命名为 demo2.jsp，内容入下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@page pageEncoding=<span class="string">"utf-8"</span> contentType=<span class="string">"text/html; charset=utf-8"</span>%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">	<span class="comment">//创建 XMLHttpRequest对象</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">getXhr</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> xhr</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">			xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;<span class="comment">//老版IE</span></span><br><span class="line">			xhr = <span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//alert(xhr);</span></span><br><span class="line">		<span class="keyword">return</span> xhr;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">sendRequest</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> xhr = getXhr();<span class="comment">//获取XMLHttpRequest对象</span></span><br><span class="line">		xhr.open(<span class="string">"get"</span>, <span class="string">"demo1.do"</span>);<span class="comment">//创建一个HTTP请求</span></span><br><span class="line">		<span class="comment">//注册一个回调函数</span></span><br><span class="line">		xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="comment">//readyState==4 表示请求处理完毕</span></span><br><span class="line">			<span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) &#123;</span><br><span class="line">				<span class="comment">//获取服务器返回的信息</span></span><br><span class="line">				<span class="keyword">var</span> msg = xhr.responseText;</span><br><span class="line">				<span class="comment">//将消息放到span中显示</span></span><br><span class="line">				<span class="built_in">document</span>.getElementById(<span class="string">"msg"</span>).innerHTML = msg;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		xhr.send(<span class="literal">null</span>);<span class="comment">//发送HTTP请求</span></span><br><span class="line">	&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body style=<span class="string">"font-size: 30px;"</span>&gt;</span><br><span class="line">	&lt;a href=<span class="string">"#"</span> onclick=<span class="string">"sendRequest();"</span>&gt;查看上证指数&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">	&lt;span id="msg"&gt;&lt;/</span>span&gt;</span><br><span class="line">	&lt;hr /&gt;</span><br><span class="line">	&lt;table&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;td&gt;股市新闻&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">			&lt;td&gt;时间&lt;/</span>td&gt;</span><br><span class="line">		&lt;<span class="regexp">/tr&gt;</span></span><br><span class="line"><span class="regexp">		&lt;tr&gt;</span></span><br><span class="line"><span class="regexp">			&lt;td&gt;新一代股神mitre&lt;/</span>td&gt;</span><br><span class="line">			&lt;td&gt;<span class="number">2018</span><span class="number">-11</span><span class="number">-22</span>&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">		&lt;/</span>tr&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;td&gt;股市肿么了&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">			&lt;td&gt;2018-11-21&lt;/</span>td&gt;</span><br><span class="line">		&lt;<span class="regexp">/tr&gt;</span></span><br><span class="line"><span class="regexp">		&lt;tr&gt;</span></span><br><span class="line"><span class="regexp">			&lt;td&gt;大海你真美&lt;/</span>td&gt;</span><br><span class="line">			&lt;td&gt;<span class="number">2018</span><span class="number">-11</span><span class="number">-21</span>&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">		&lt;/</span>tr&gt;</span><br><span class="line">	&lt;<span class="regexp">/table&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>结果：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-22_225715.png" alt>  </p>
<h1 id="3-XMLHttpRequest-对象"><a href="#3-XMLHttpRequest-对象" class="headerlink" title="3 XMLHttpRequest 对象"></a>3 XMLHttpRequest 对象</h1><p>XMLHttpRequest 对象目前还没有完全标准化。</p>
<p><strong>XMLHttpRequest 对象提供了基于 HTTP协议 的交互方法。包括发送 POST 和 HEAD 请求和普通的 GET 请求。</strong><br>XMLHttpRequest 可以同步或异步地返回 Web服务器 的响应，并能够以文本或 DOM文档 的形式返回内容。  </p>
<p>XMLHttpRequest 并不限于和 XML 文档一起使用：<strong>它可以接收任何形式的文本文档</strong>。  </p>
<h2 id="3-1-属性"><a href="#3-1-属性" class="headerlink" title="3.1 属性"></a>3.1 属性</h2><h3 id="1-readyState"><a href="#1-readyState" class="headerlink" title="1 readyState"></a>1 readyState</h3><p>readyState 表示 HTTP 请求的状态。<br>当一个 XMLHttpRequest 初次创建时，readyState = 0 ；接收到完整的 HTTP 响应时，这个值增加到 4。<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-29_091814.png" alt><br>每次这个属性的值增加的时候，都会 <strong>触发 onreadystatechange 事件句柄</strong>。  </p>
<h3 id="2-responseText"><a href="#2-responseText" class="headerlink" title="2 responseText"></a>2 responseText</h3><p>responseText属性的值 是到目前为止 <strong>客户端接收到的响应体</strong>（不包括头部）。  </p>
<p><code>readyState &lt; 3 </code>，responseText属性值 是一个空字符串。<br><code>readyState = 3 </code>，responseText属性值 是目前已经接收的响应部分。<br><code>readyState = 4 </code>，responseText属性值 是完整的响应体。  </p>
<h3 id="3-responseXML"><a href="#3-responseXML" class="headerlink" title="3 responseXML"></a>3 responseXML</h3><p>功能和 responseText 类似。<br>对请求的响应，解析为 XML 并作为 Document 对象返回。  </p>
<h3 id="4-status"><a href="#4-status" class="headerlink" title="4 status"></a>4 status</h3><p>由服务器返回的 HTTP 状态码。<br>如 200 表示成功，404 表示 “Not Found” 错误。<br>当 readyState 小于 3 的时候读取这一属性会导致一个异常。</p>
<h2 id="3-2-事件句柄"><a href="#3-2-事件句柄" class="headerlink" title="3.2 事件句柄"></a>3.2 事件句柄</h2><h3 id="onreadystatechange"><a href="#onreadystatechange" class="headerlink" title="onreadystatechange"></a>onreadystatechange</h3><p>每次 <strong>readyState属性</strong> 改变的时候调用的事件句柄函数。<br>当 readyState 为 3 时，它也可能调用多次。  </p>
<h2 id="3-3-方法"><a href="#3-3-方法" class="headerlink" title="3.3 方法"></a>3.3 方法</h2><h3 id="1-open"><a href="#1-open" class="headerlink" title="1 open()"></a>1 open()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">open(method, url, async, username, password)</span><br><span class="line"><span class="comment">// method 参数是用于请求的 HTTP 方法。值包括 GET、POST 和 HEAD</span></span><br><span class="line"><span class="comment">//async 参数指示请求是否异步执行，默认不填或 true 请求为异步。 false为同步。</span></span><br><span class="line"><span class="comment">//username 和 password 参数是可选的，为 url 所需的授权提供认证资格。</span></span><br></pre></td></tr></table></figure>
<p><strong>初始化 HTTP 请求参数</strong>。<br>例如 URL 和 请求方法，但是并不发送请求。  </p>
<p><strong><font color="red">open() 会把 readyState 设置为 1</font></strong>。</p>
<h3 id="2-send"><a href="#2-send" class="headerlink" title="2 send()"></a>2 send()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">send(body)</span><br></pre></td></tr></table></figure>
<p><strong>发送 HTTP 请求</strong>。<br>如果 readyState 不是 1，send() 抛出一个异常。否则，它发送一个 HTTP 请求(POST 或 PUT、GET等)。<br>该请求由以下几部分组成：  </p>
<ol>
<li>调用 open() 时指定的 HTTP 方法、URL 以及认证资格（如果有的话）。  </li>
<li>调用 setRequestHeader() 时指定的请求头部（如果有的话）。  </li>
<li>传递给这个方法的 body 参数。  </li>
</ol>
<p>一旦请求发布了，<strong><font color="red">send() 会把 readyState 设置为 2</font></strong>，并触发 onreadystatechange 事件句柄。</p>
<p>POST请求 的请求参数 需要放在 send() 中发送:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// post请求 http://localhost:8080/ajax01/check.do?name=cherry</span></span><br><span class="line">xhr.open(<span class="string">"POST"</span>,<span class="string">"/ajax01/check.do"</span>);</span><br><span class="line"><span class="comment">// setRequestHeader 和 事件句柄 处理略</span></span><br><span class="line">xhr.send(<span class="string">"name="</span>+<span class="string">"cherry"</span>);</span><br></pre></td></tr></table></figure></p>
<p>而 GET 请求的请求参数放在 open中：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//get请求 http://localhost:8080/ajax01/check.do?name=cherry</span></span><br><span class="line">xhr.open(<span class="string">"GET"</span>,<span class="string">"/ajax01/check.do?name="</span>+<span class="string">"cherry"</span>);</span><br><span class="line"><span class="comment">// 事件句柄 处理略</span></span><br><span class="line">xhr.send(<span class="keyword">null</span>);</span><br></pre></td></tr></table></figure></p>
<h3 id="3-setRequestHeader"><a href="#3-setRequestHeader" class="headerlink" title="3 setRequestHeader()"></a>3 setRequestHeader()</h3><p>POST请求 必须给 HTTP协议 设置请求头参数(不设置服务端将取不到请求参数)。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.setRequestHeader(<span class="string">"content-type"</span>,<span class="string">"application/x-www-form-urlencoded"</span>);</span><br></pre></td></tr></table></figure></p>
<h3 id="4-abort"><a href="#4-abort" class="headerlink" title="4 abort()"></a>4 abort()</h3><p>取消当前响应，关闭连接并且结束任何未决的网络活动。  </p>
<p>abort() 会把 readyState属性值 置为 0 ，并且取消所有未决的网络活动。<br>如果请求用了太长时间，而且响应不再必要的时候，可以调用 abort()。  </p>
<h1 id="head4">4 附例</h1>

<p>在上例基础上， 修改demo2.jsp 实现 “检查用户名是否可用” 功能 。(<a href="https://mitrecx.github.io/2018/11/29/JavaScript%E7%AC%94%E8%AE%B04-jQuery%E5%92%8CAJAX/" target="_blank" rel="noopener">查看本例的 jQuery实现</a>)<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@page</span> <span class="attr">pageEncoding</span>=<span class="string">"utf-8"</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=utf-8"</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">		<span class="comment">//创建 XMLHttpRequest对象</span></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">getXhr</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> xhr</span></span><br><span class="line"><span class="javascript">			<span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span></span><br><span class="line"><span class="javascript">				xhr = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="javascript">			&#125; <span class="keyword">else</span> &#123;<span class="comment">//老版IE</span></span></span><br><span class="line"><span class="javascript">				xhr = <span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="javascript">			<span class="comment">//alert(xhr);</span></span></span><br><span class="line"><span class="javascript">			<span class="keyword">return</span> xhr;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">sendRequest</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> xhr = getXhr();<span class="comment">//获取XMLHttpRequest对象</span></span></span><br><span class="line"><span class="javascript">			xhr.open(<span class="string">"get"</span>, <span class="string">"demo1.do"</span>);<span class="comment">//创建一个HTTP请求</span></span></span><br><span class="line"><span class="javascript">			<span class="comment">//注册一个回调函数</span></span></span><br><span class="line"><span class="javascript">			xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">				<span class="comment">//readyState==4 表示请求处理完毕</span></span></span><br><span class="line"><span class="javascript">				<span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) &#123;</span></span><br><span class="line"><span class="javascript">					<span class="comment">//获取服务器返回的信息</span></span></span><br><span class="line"><span class="javascript">					<span class="keyword">var</span> msg = xhr.responseText;</span></span><br><span class="line"><span class="javascript">					<span class="comment">//将消息放到span中显示</span></span></span><br><span class="line"><span class="javascript">					<span class="built_in">document</span>.getElementById(<span class="string">"msg"</span>).innerHTML = msg;</span></span><br><span class="line"><span class="undefined">				&#125;</span></span><br><span class="line"><span class="undefined">			&#125;;</span></span><br><span class="line"><span class="javascript">			xhr.send(<span class="literal">null</span>);<span class="comment">//发送HTTP请求</span></span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">		<span class="comment">//检查用户名是否可用</span></span></span><br><span class="line"><span class="javascript">		<span class="function"><span class="keyword">function</span> <span class="title">checkName</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> name=<span class="built_in">document</span>.getElementById(<span class="string">"username"</span>).value;</span></span><br><span class="line"><span class="javascript">			<span class="keyword">var</span> xhr=getXhr();</span></span><br><span class="line"><span class="javascript">			<span class="comment">/* get请求 */</span></span></span><br><span class="line"><span class="javascript">			<span class="comment">//xhr.open("GET","/ajax01/check.do?name="+name);</span></span></span><br><span class="line"><span class="javascript">			<span class="comment">//xhr.send(null);</span></span></span><br><span class="line"><span class="javascript">			<span class="comment">/* post请求 */</span></span></span><br><span class="line"><span class="javascript">			xhr.open(<span class="string">"POST"</span>,<span class="string">"/ajax01/check.do"</span>);</span></span><br><span class="line"><span class="javascript">			<span class="comment">// POST请求必须给HTTP协议设置请求头参数(不设置服务端将取不到请求参数)</span></span></span><br><span class="line"><span class="javascript">			xhr.setRequestHeader(<span class="string">"content-type"</span>,<span class="string">"application/x-www-form-urlencoded"</span>);</span></span><br><span class="line"><span class="javascript">			<span class="comment">//注册回调函数</span></span></span><br><span class="line"><span class="javascript">			xhr.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">				<span class="comment">//如果请求处理完毕且响应正常</span></span></span><br><span class="line"><span class="javascript">				<span class="keyword">if</span>(xhr.readyState==<span class="number">4</span> &amp;&amp; xhr.status==<span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="javascript">					<span class="keyword">var</span> msg=xhr.responseText;</span></span><br><span class="line"><span class="javascript">					<span class="built_in">document</span>.getElementById(<span class="string">"name_msg"</span>).innerHTML=msg;</span></span><br><span class="line"><span class="undefined">				&#125;</span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="javascript">			xhr.send(<span class="string">"name="</span>+name);		</span></span><br><span class="line"><span class="javascript">			<span class="built_in">document</span>.getElementById(<span class="string">"name_msg"</span>).innerHTML=<span class="string">"正在检测.."</span>;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">style</span>=<span class="string">"font-size: 30px;"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">onclick</span>=<span class="string">"sendRequest();"</span>&gt;</span>查看上证指数<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>股市新闻<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>时间<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>新一代股神mitre<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>2018-11-22<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>股市肿么了<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>2018-11-21<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>大海你真美<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">td</span>&gt;</span>2018-11-21<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">onblur</span>=<span class="string">"checkName();"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"name_msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>CheckServlet.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mitrecx;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CheckServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    request.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">    response.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</span><br><span class="line">    PrintWriter out=response.getWriter();</span><br><span class="line">    String name=request.getParameter(<span class="string">"name"</span>);</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    <span class="comment">//检查 用户名 是否可用</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="string">"mitre"</span>.equals(name)) &#123;</span><br><span class="line">      out.println(<span class="string">"用户名已被占用"</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">      out.println(<span class="string">"用户名可用"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    out.flush();</span><br><span class="line">    out.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>web.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>checkServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>cn.mitrecx.CheckServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>checkServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/check.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>先测试 servlet :<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-28_224552.png" alt>  </p>
<p>程序运行结果：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-29_085332.png" alt>    </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/19/JavaScript笔记2-JQuery/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/19/JavaScript笔记2-JQuery/" itemprop="url">JavaScript笔记2-jQuery</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-19T23:29:52+08:00">
                2018-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在<a href="https://mitrecx.github.io/2018/11/15/JavaScript%E7%AC%94%E8%AE%B0-1/" target="_blank" rel="noopener">上一节</a>说到，web developers 必修的三门语言：  </p>
<ol>
<li>HTML  </li>
<li>CSS  </li>
<li>JavaScript  </li>
</ol>
<p>学习 jQuery 必须对上面 3 门语言有一定的了解。  </p>
<p>为什么要学习 jQuery：  </p>
<ol>
<li><p>jQuery 是一个优秀的、<strong>轻量级的 JS 库</strong>。极大的简化了 JS 编程。   </p>
</li>
<li><p>jQuery 封装了 JS、 CSS、 DOM， 提供了一致的简洁的 API。  </p>
</li>
<li><p>使用户更方便的处理 HTML、 Events， 实现动画效果。</p>
</li>
<li><p>方便地为网站提供 AJAX 交互。  </p>
</li>
</ol>
<p><strong>jQuery 的使用步骤：</strong>  </p>
<ol>
<li><p>引入 <a href="https://code.jquery.com/jquery-3.3.1.min.js" target="_blank" rel="noopener">jQuery 库</a>。   </p>
</li>
<li><p>使用 <strong>选择器</strong> 定位要操作的节点。  </p>
</li>
<li><p>调用 jQuery 方法 进行操作。  </p>
</li>
</ol>
<p><strong><font color="red">jQuery 语法： $(selector).action()</font></strong><br>美元符号定义 jQuery<br>选择器（selector）”查询” HTML 元素<br>action() 执行对元素的操作  </p>
<h1 id="1-jQuery-对象"><a href="#1-jQuery-对象" class="headerlink" title="1 jQuery 对象"></a>1 jQuery 对象</h1><p><strong>DOM对象</strong>： 用传统的方法(javascript)获得的对象。<br><strong>jQuery对象</strong>： 通过 jQuery选择器 获得的对象 是 jQuery对象，如<code>$(“.class1”)</code>, <code>$(“#id1”)</code>。  </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//DOM对象</span></span><br><span class="line"><span class="keyword">var</span> domObj = <span class="built_in">document</span>.getElementById(<span class="string">"id"</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">//jQuery对象;</span></span><br><span class="line"><span class="keyword">var</span> $obj = $(<span class="string">"#id"</span>);</span><br></pre></td></tr></table></figure>
<p><strong>jQuery对象</strong> 是jQuery独有的。如果一个对象是jQuery对象，那么就可以使用jQuery里的方法，例:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取id为foo的元素内的html代码，html()是jQuery特有的方法</span></span><br><span class="line">$(<span class="string">"#foo"</span>).html();</span><br></pre></td></tr></table></figure></p>
<p>以上代码等价于：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// innerHTML 是 DOM对象 的方法</span></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"foo"</span>).innerHTML;</span><br></pre></td></tr></table></figure></p>
<p><strong><font color="red">注：在jQuery对象中无法使用DOM对象的任何方法。</font></strong><br>当然，DOM对象也无法使用jQuery对象的任何方法。    </p>
<p><strong>重点：<font color="green"> jQuery对象 的本质是 DOM对象 数组</font></strong>    </p>
<p><strong>jQuery对象和DOM对象的互相转换：</strong>  </p>
<p>jquery提供了两种方法将一个jquery对象转换成一个dom对象，即 <strong>[index]</strong> 和 <strong>get(index)</strong>。    </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过id选择器 获取 jquery对象</span></span><br><span class="line"><span class="keyword">var</span> $cr=$(<span class="string">"#cr"</span>);</span><br><span class="line"><span class="comment">// jQuery 对象 转化为 DOM对象</span></span><br><span class="line"><span class="keyword">var</span> domObj = $cr[<span class="number">0</span>]; <span class="comment">//也可写成 var domObj=$cr.get(0);</span></span><br></pre></td></tr></table></figure>
<p>dom对象转换成jquery对象： 只需要用$()把dom对象包装起来，就可以获得一个jquery对象。<br>方法为 $(dom对象)。  </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//dom对象</span></span><br><span class="line"><span class="keyword">var</span> domObj=<span class="built_in">document</span>.getElementById(<span class="string">"cr"</span>);</span><br><span class="line"><span class="comment">// DOM对象 转换成 jquery对象</span></span><br><span class="line"><span class="keyword">var</span> $cr = $(domObj);</span><br></pre></td></tr></table></figure>
<p>平时用到的jquery对象都是通过$()函数制造出来的，$()函数就是一个jQuery对象的制造工厂。   </p>
<p>建议:<br><strong>如果获取的对象是 jQuery对象，那么在变量前面加上$</strong> , 这样方便容易识别出哪些是jQuery对象。<br>例如:<br><code> var $variable = jQuery对象;</code><br>如果获取的是dom对象，则定义如下:<br><code> var variable = dom对象;</code>  </p>
<h1 id="2-jQuery-选择器"><a href="#2-jQuery-选择器" class="headerlink" title="2. jQuery 选择器"></a>2. jQuery 选择器</h1><p>jQuery选择器 和 CSS选择器 类似，但是比 CSS选择器 更丰富。  </p>
<p>CSS选择器：选择元素，施加样式。<br>jQuery选择器：选择元素，施加方法。  </p>
<p>1 基本选择器<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#id"</span>)            <span class="comment">//id选择器, 根据属性id名 定位元素</span></span><br><span class="line">$(<span class="string">"div"</span>)            <span class="comment">//元素选择器， 根据 标签名 定位元素</span></span><br><span class="line">$(<span class="string">".classname"</span>)     <span class="comment">//类选择器 ，根据 属性class名 定位元素</span></span><br><span class="line">$(<span class="string">".classname,.classname1,#id1"</span>)     <span class="comment">//组合选择器，定位一组选择器所对应的 所有元素</span></span><br></pre></td></tr></table></figure></p>
<p>2 层次选择器<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"select1 select2"</span>)  <span class="comment">//在 select1元素下， 选中所有满足 select2 的 子孙元素</span></span><br><span class="line">$(<span class="string">"select1 &gt; select2"</span>)<span class="comment">//在 select1元素下， 选中所有满足 select2 的 子元素  (只是子元素，不是子孙元素)</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">"#id .classname "</span>)    <span class="comment">//后代元素选择器</span></span><br><span class="line">$(<span class="string">"#id &gt; .classname "</span>)    <span class="comment">//子元素选择器</span></span><br><span class="line">$(<span class="string">"#id + .classname "</span>)    <span class="comment">//紧邻下一个元素选择器（下一个兄弟）</span></span><br><span class="line">$(<span class="string">"#id ~ .classname "</span>)    <span class="comment">//兄弟元素选择器（所有兄弟）</span></span><br></pre></td></tr></table></figure></p>
<p>3 过滤选择器(重点)<br>3.1 基本过滤选择器 ( 用于表格和列表，可以在一组同样的元素中，选第一个，最后一个，奇数位等等 )<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"li:first"</span>)    <span class="comment">//第一个li</span></span><br><span class="line">$(<span class="string">"li:last"</span>)     <span class="comment">//最后一个li</span></span><br><span class="line">$(<span class="string">"li:even"</span>)     <span class="comment">//挑选下标为偶数的li</span></span><br><span class="line">$(<span class="string">"li:odd"</span>)      <span class="comment">//挑选下标为奇数的li</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">"li:eq(4)"</span>)    <span class="comment">//下标等于 4 的li(第五个 li 元素)</span></span><br><span class="line">$(<span class="string">"li:gt(2)"</span>)    <span class="comment">//下标大于 2 的li</span></span><br><span class="line">$(<span class="string">"li:lt(2)"</span>)    <span class="comment">//下标小于 2 的li</span></span><br><span class="line">$(<span class="string">"li:not(#runoob)"</span>) <span class="comment">//挑选除 id="runoob" 以外的所有li</span></span><br></pre></td></tr></table></figure></p>
<p>3.2 内容过滤选择器<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"div:contains('Runob')"</span>)    <span class="comment">// 包含 Runob文本的元素</span></span><br><span class="line">$(<span class="string">"td:empty"</span>)                 <span class="comment">//不包含子元素或者文本的空元素</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">"div:has(selector)"</span>)        <span class="comment">//含有选择器所匹配的元素</span></span><br><span class="line">$(<span class="string">"td:parent"</span>)                <span class="comment">//含有子元素或者文本的元素</span></span><br></pre></td></tr></table></figure></p>
<p>3.3 可见性过滤选择器<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"li:hidden"</span>)       <span class="comment">//匹配所有不可见元素，或type为hidden的元素</span></span><br><span class="line">$(<span class="string">"li:visible"</span>)      <span class="comment">//匹配所有可见元素</span></span><br></pre></td></tr></table></figure></p>
<p>3.4 <strong>属性过滤选择器</strong> (根据属性 定位元素)<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"div[id]"</span>)        <span class="comment">//所有含有 id 属性 的 div 元素</span></span><br><span class="line">$(<span class="string">"div[id='123']"</span>)        <span class="comment">// id属性值为123的div 元素</span></span><br><span class="line">$(<span class="string">"div[id!='123']"</span>)        <span class="comment">// id属性值不等于123的div 元素</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">"div[id^='qq']"</span>)        <span class="comment">// id属性值以qq开头的div 元素</span></span><br><span class="line">$(<span class="string">"div[id$='zz']"</span>)        <span class="comment">// id属性值以zz结尾的div 元素</span></span><br><span class="line">$(<span class="string">"div[id*='bb']"</span>)        <span class="comment">// id属性值包含bb的div 元素</span></span><br><span class="line">$(<span class="string">"input[id][name$='man']"</span>) <span class="comment">//多属性选过滤，同时满足两个属性的条件的元素</span></span><br></pre></td></tr></table></figure></p>
<p>3.5 状态过滤选择器<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"input:enabled"</span>)    <span class="comment">// 匹配可用的 input</span></span><br><span class="line">$(<span class="string">"input:disabled"</span>)   <span class="comment">// 匹配不可用的 input</span></span><br><span class="line">$(<span class="string">"input:checked"</span>)    <span class="comment">// 匹配选中的 input</span></span><br><span class="line">$(<span class="string">"option:selected"</span>)  <span class="comment">// 匹配选中的 option</span></span><br></pre></td></tr></table></figure></p>
<p>4 表单选择器<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">":input"</span>)      <span class="comment">//匹配所有 input, textarea, select 和 button 元素</span></span><br><span class="line">$(<span class="string">":text"</span>)       <span class="comment">//所有的单行文本框，$(":text") 等价于$("[type=text]")，推荐使用$("input:text")效率更高，下同</span></span><br><span class="line">$(<span class="string">":password"</span>)   <span class="comment">//所有密码框</span></span><br><span class="line">$(<span class="string">":radio"</span>)      <span class="comment">//所有单选按钮</span></span><br><span class="line">$(<span class="string">":checkbox"</span>)   <span class="comment">//所有复选框</span></span><br><span class="line">$(<span class="string">":submit"</span>)     <span class="comment">//所有提交按钮</span></span><br><span class="line">$(<span class="string">":reset"</span>)      <span class="comment">//所有重置按钮</span></span><br><span class="line">$(<span class="string">":button"</span>)     <span class="comment">//所有button按钮</span></span><br><span class="line">$(<span class="string">":file"</span>)       <span class="comment">//所有文件域</span></span><br></pre></td></tr></table></figure></p>
<h1 id="3-jQuery-属性和方法"><a href="#3-jQuery-属性和方法" class="headerlink" title="3 jQuery 属性和方法"></a>3 jQuery 属性和方法</h1><p>属性：<br><code>$jqObj.length</code>    包含 jQuery 对象中元素的数目  </p>
<p>jQuery对象的 方法 可以分为 4类：  </p>
<ol>
<li>事件方法  </li>
<li>效果方法</li>
<li>HTML/CSS 方法  </li>
<li>遍历节点</li>
</ol>
<h2 id="3-1-事件方法"><a href="#3-1-事件方法" class="headerlink" title="3.1 事件方法"></a>3.1 事件方法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">blur()	<span class="comment">// 添加/触发失去焦点事件</span></span><br><span class="line">change()	<span class="comment">// 添加/触发 change 事件</span></span><br><span class="line">click()	<span class="comment">// 添加/触发 click 事件</span></span><br><span class="line">dblclick()	<span class="comment">// 添加/触发 double click 事件</span></span><br><span class="line"></span><br><span class="line">mousedown()	<span class="comment">// 添加/触发 mousedown 事件</span></span><br><span class="line">mouseup()	<span class="comment">// 添加/触发 mouseup 事件</span></span><br><span class="line"></span><br><span class="line">mouseleave()	<span class="comment">// 添加/触发 mouseleave 事件</span></span><br><span class="line">mousemove()	<span class="comment">// 添加/触发 mousemove 事件</span></span><br><span class="line">mouseout()	<span class="comment">// 添加/触发 mouseout 事件</span></span><br><span class="line">mouseover()	<span class="comment">// 添加/触发 mouseover 事件</span></span><br></pre></td></tr></table></figure>
<h2 id="3-2-效果方法"><a href="#3-2-效果方法" class="headerlink" title="3.2 效果方法"></a>3.2 效果方法</h2><p>用于创建动画效果的 jQuery 方法。<br>略。  </p>
<h2 id="3-3-HTML-CSS-方法"><a href="#3-3-HTML-CSS-方法" class="headerlink" title="3.3 HTML/CSS 方法"></a>3.3 HTML/CSS 方法</h2><p>读写节点的 HTML 内容：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 读</span></span><br><span class="line">$jqObj.html();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写</span></span><br><span class="line">$jqObj.html(<span class="string">"&lt;span&gt; hello &lt;/span&gt;"</span>);</span><br></pre></td></tr></table></figure></p>
<p>读写节点的文本内容：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 读</span></span><br><span class="line">$jqOjb.text();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写</span></span><br><span class="line">$jqObj.text(<span class="string">"hello"</span>);</span><br></pre></td></tr></table></figure></p>
<p>读写 <strong>表单或按钮等 <font color="red">value</font> 属性</strong> 值：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 读</span></span><br><span class="line">$jqObj.val();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写</span></span><br><span class="line">$jqObj.val(<span class="string">"hello"</span>);</span><br></pre></td></tr></table></figure></p>
<p>读写节点的 <strong>属性值</strong> ：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 读</span></span><br><span class="line">$jqObj.attr(<span class="string">"属性名"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写</span></span><br><span class="line">$jqObj.attr(<span class="string">"属性名"</span>,<span class="string">"新的属性值"</span>);</span><br></pre></td></tr></table></figure></p>
<p>增删节点：  </p>
<p><strong>创建 DOM 节点</strong>：  <code> $(“节点内容”) </code><br>创建的节点 <strong>会存在 内存里</strong>。 但是页面上看不到，只有把 节点 <strong>追加到已经存在的某个节点下</strong>， 页面上才能看到。  </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个 DOM 节点</span></span><br><span class="line"><span class="keyword">var</span> pNode = $(<span class="string">"&lt;i&gt; hello &lt;/i&gt;"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入 DOM 节点</span></span><br><span class="line"><span class="comment">// 在 p元素之前插入 DOM节点 (pNode 作为 p 的上一个兄弟节点)</span></span><br><span class="line">$(<span class="string">"p"</span>).before(pNode);</span><br><span class="line"><span class="comment">//结果：</span></span><br><span class="line"><span class="comment">//&lt;i&gt; hello &lt;/i&gt;</span></span><br><span class="line"><span class="comment">//&lt;p&gt;xxx&lt;/p&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// pNode 作为 p 的 下一个兄弟节点</span></span><br><span class="line">$(<span class="string">"p"</span>).after(pNode);</span><br><span class="line"></span><br><span class="line"><span class="comment">// pNode 做为 p 的第一个子节点</span></span><br><span class="line">$(<span class="string">"p"</span>).prepend(pNode);</span><br><span class="line"><span class="comment">//结果：</span></span><br><span class="line"><span class="comment">//&lt;p&gt;&lt;i&gt; hello &lt;/i&gt;xxx&lt;/p&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// pNode 作为 p 的最后一个子节点</span></span><br><span class="line">$(<span class="string">"p"</span>).append(pNode);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除节点</span></span><br><span class="line">$(<span class="string">"p"</span>).remove();</span><br><span class="line"><span class="comment">// 清空节点： 节点还在，内容清空</span></span><br><span class="line">$(<span class="string">"p"</span>).empty();</span><br></pre></td></tr></table></figure>
<h2 id="3-4-遍历节点"><a href="#3-4-遍历节点" class="headerlink" title="3.4 遍历节点"></a>3.4 遍历节点</h2><p>略。</p>
<h1 id="4-示例"><a href="#4-示例" class="headerlink" title="4 示例"></a>4 示例</h1><p>把 input 元素（type 属性值 为 “password”）的 type 属性值改为 “text”。  </p>
<p><strong>jQuery 实现</strong>：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;script src=<span class="string">"jquery-3.3.1.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">	&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">		<span class="function"><span class="keyword">function</span> <span class="title">doclick</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">			$(<span class="string">"#password1"</span>).attr(<span class="string">"type"</span>,<span class="string">"text"</span>);</span><br><span class="line"></span><br><span class="line">			alert($(<span class="string">"#password1"</span>).val());</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;form&gt;</span><br><span class="line">		&lt;input type=<span class="string">"password"</span> id=<span class="string">"password1"</span> value=<span class="string">"123456"</span> /&gt;</span><br><span class="line">		&lt;input type=<span class="string">"button"</span> id=<span class="string">"button1"</span> onclick=<span class="string">"doclick();"</span> value=<span class="string">"Show default value"</span> /&gt;</span><br><span class="line">	&lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>也可以写成如下形式：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;script src=<span class="string">"jquery-3.3.1.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">	&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">		 $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		 	$(<span class="string">"#button1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		 		$(<span class="string">"#password1"</span>).attr(<span class="string">"type"</span>,<span class="string">"text"</span>);</span><br><span class="line"></span><br><span class="line">				alert($(<span class="string">"#password1"</span>).val());</span><br><span class="line">			&#125;)&#125;);</span><br><span class="line">	&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;form&gt;</span><br><span class="line">	&lt;input type=<span class="string">"password"</span> id=<span class="string">"password1"</span> value=<span class="string">"123456"</span> /&gt;</span><br><span class="line">	&lt;input type=<span class="string">"button"</span> id=<span class="string">"button1"</span>  value=<span class="string">"Show default value"</span> /&gt;</span><br><span class="line">	&lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><strong>ready() 方法：</strong> 在文档加载后激活函数。<br>当 DOM（文档对象模型） 已经加载，会发生 ready 事件。<br>ready()方法 有三种语法：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//语法 1</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>)</span></span><br><span class="line"><span class="function">//语法 2</span></span><br><span class="line"><span class="function"><span class="title">$</span>(<span class="params"></span>).<span class="title">ready</span>(<span class="params">function</span>)</span></span><br><span class="line"><span class="function">//语法 3</span></span><br><span class="line"><span class="function"><span class="title">$</span>(<span class="params">function</span>)</span></span><br></pre></td></tr></table></figure></p>
<p>注： 语法 3 和 DOM对象转jQuery对象的语法一样 ！！！  </p>
<p><strong>JS 实现</strong>：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">		<span class="function"><span class="keyword">function</span> <span class="title">doClick</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="built_in">document</span>.getElementById(<span class="string">"password1"</span>).type=<span class="string">"text"</span>;</span><br><span class="line"></span><br><span class="line">			alert(<span class="built_in">document</span>.getElementById(<span class="string">"password1"</span>).value);</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;form&gt;</span><br><span class="line">		&lt;input type=<span class="string">"password"</span> id=<span class="string">"password1"</span> value=<span class="string">"123456"</span> /&gt;</span><br><span class="line">		&lt;input type=<span class="string">"button"</span> id=<span class="string">"button1"</span> onclick=<span class="string">"doClick();"</span> value=<span class="string">"Show default value"</span> /&gt;</span><br><span class="line">	&lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ol>
<li><p><a href="https://www.cnblogs.com/yellowapplemylove/archive/2011/04/19/2021583.html" target="_blank" rel="noopener">DOM对象和JQuery对象的区别</a>   </p>
</li>
<li><p><a href="https://www.runoob.com/jquery/jquery-ref-selectors.html" target="_blank" rel="noopener">菜鸟教程: jQuery 选择器</a></p>
</li>
</ol>
<h1 id="附"><a href="#附" class="headerlink" title="附"></a>附</h1><p><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-20_144025.png" alt>  </p>
<p>上图是在 Chrome 浏览器 的 console 控制台测试的结果。  </p>
<p><strong>通过 jQuery 的 id 选择器选择的结果 可以调用 DOM对象的value属性</strong>， <strong><font color="red">但不可以调用 jQuery对象的 val() 方法</font></strong> 。  </p>
<p>jQuery 选择器返回的结果 为什么 不是 jQuery 对象？</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/15/JavaScript笔记-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mitre">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MITRE">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/15/JavaScript笔记-1/" itemprop="url">JavaScript笔记1-JS基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-15T21:54:46+08:00">
                2018-11-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="0-前言"><a href="#0-前言" class="headerlink" title="0 前言"></a>0 前言</h1><p>为什么要学习 JavaScript ？ <a href="https://www.w3schools.com/Js/" target="_blank" rel="noopener">引用于w3schools</a> :  </p>
<p>JavaScript is one of the 3 languages all web developers must learn:</p>
<ol>
<li><p>HTML to define <strong>the content of web pages</strong>  </p>
</li>
<li><p>CSS to specify <strong>the layout of web pages</strong>  </p>
</li>
<li><p><strong><font color="red">JavaScript</font></strong> to program <strong>the behavior of web pages</strong>  </p>
</li>
</ol>
<p>JavaScript 是一种轻量级的脚本语言，由浏览器执行。  </p>
<p><strong>与 JS 相关的技术</strong>：  </p>
<ol>
<li>HTML DOM 定义了访问和操作 HTML 文档的标准方法。  </li>
<li><strong>jQuery库</strong> 极大地简化了 JavaScript 编程。  </li>
<li><strong>AJAX</strong> = Asynchronous JavaScript and XML（<strong>异步的 JavaScript 和 XML</strong>）。    </li>
<li><strong>JSON</strong> ：JavaScript 对象表示法（JavaScript Object Notation）。  </li>
</ol>
<p>JS 代码可以写在 HTML 中，也可以写在 js 文件中：<br><strong>1、</strong> HTML 中的 JavaScript:<br>HTML 中的 JS脚本 必须位于 &lt;script&gt; 与 &lt;/script&gt; 标签之间。<br>JS脚本 可被放置在 HTML 页面的 &lt;body&gt;元素 和 &lt;head&gt;元素 中。  </p>
<p><strong>JavaScript</strong> 是所有现代浏览器以及 HTML5 中的 <strong>默认脚本语言</strong>。  在 &lt;script&gt; 标签中使用 <code>type=”text/javascript”</code> 不是必要的。  </p>
<p><strong>2、</strong> 外部的 JavaScript:<br>外部 JavaScript 文件的文件扩展名是 .js。<br>引用外部 JS 文件，需要在 &lt;script&gt; 标签的 “src” 属性中设置该 .js 文件：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"myScript.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<hr>
<p>我对 JavaScript 的理解 ：  </p>
<ol>
<li><p>学习简单： UE + Chrome + W3School 即可学习开发    </p>
</li>
<li><p>面向对象，回调函数    </p>
</li>
<li><p>有点 Java 的影子 ，其 控制语句 和 运算符 与Java的语法几乎一致  </p>
</li>
<li><p>在 JS 中，<strong>变量没有类型，统一用 var 声明。但变量所引用的数据是有类型的</strong>   </p>
</li>
<li><p>JS 函数是 <strong>由事件驱动的</strong> 或者当它被调用时执行的 <strong>可重复使用的代码块</strong>。  </p>
</li>
</ol>
<p><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/js%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png" alt>  </p>
<p><strong><font color="red">在 JS 中，一切皆对象。</font></strong></p>
<hr>
<h1 id="1-JavaScript-内置对象"><a href="#1-JavaScript-内置对象" class="headerlink" title="1 JavaScript 内置对象"></a>1 JavaScript 内置对象</h1><ol>
<li><a href="#string">String</a>  </li>
<li><a href="#number">Number</a>  </li>
<li><a href="#array">Array 数组</a>  </li>
<li><a href="#math">Math</a>  </li>
<li><a href="#date">Date 时间</a>  </li>
<li><a href="#regexp">RegExp 正则表达式</a></li>
<li><a href="#function">Function</a>  </li>
<li>Boolean (不做说明)  </li>
</ol>
<p>注：<br><strong>typeof(varName)</strong> 可以查看变量的 数据类型。<br>在浏览器中打开控制台( F12 ) ，可以方便的进行测试或学习。</p>
<h2 id="string"> 1.1 String 对象</h2>

<p>定义一个变量，引用的数据类型为 <strong>String</strong> 类型：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">"hello world."</span>;</span><br></pre></td></tr></table></figure></p>
<p>String 的属性：<br><strong>length属性</strong>，str.length 获取字符串长度。  </p>
<p>String 的函数：  </p>
<ol>
<li><p><strong>子串</strong>， <strong>str.substring</strong>(startIndex, [endIndex]) 和java一样 “含头不含尾”   </p>
</li>
<li><p><strong>获取子串下标</strong>， <strong>str.indexOf</strong>(findStr, [startIndex]),   <strong>str.lastIndexOf</strong>(findStr, [inverseStartIndex])  找到返回索引，找不到返回 -1   </p>
</li>
<li><p><strong>获取对应下标的字符</strong>，<strong>str.charAt(index)</strong>  </p>
</li>
<li><p><strong>替换 replace</strong>， str.replace(findStr, newStr) , <a href="#e1">参考例子</a>   </p>
</li>
<li><p><strong>字符串切割</strong>， <strong>str.split</strong>(findStr, [limit])  。limit 取负 和足够大一样。 但 limit 不够大，会忽略后面的段。</p>
</li>
<li><p>大小写 toUpperCase(), toLowerCase()   </p>
</li>
</ol>
<h2 id="number"> 1.2 Number 对象  </h2>

<p>引用的数据类型是 <strong>Number</strong> 类型：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num=<span class="number">5</span>;</span><br><span class="line"><span class="keyword">var</span> num2=num/<span class="number">2</span>; <span class="comment">// num2 结果为 2.5</span></span><br><span class="line"><span class="comment">// javaScript 中 数字类型 包含了 "整型" 和 "浮点型"  </span></span><br><span class="line"><span class="keyword">var</span> n=<span class="number">0.5</span>;</span><br></pre></td></tr></table></figure></p>
<p>JavaScript 中，Number 对象 包括 整数和小数。  </p>
<h2 id="array"> 1.3 Array 对象</h2>

<p>创建 <strong>数组对象</strong>：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br></pre></td></tr></table></figure></p>
<p>也可以 new 数组对象：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a2 = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//new 时 指定长度</span></span><br><span class="line"><span class="keyword">var</span> a3 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10</span>);</span><br></pre></td></tr></table></figure></p>
<p><strong><font color="red">在 JS 中，数组的长度是可变的。</font> 因此，指定数组长度是没有意义的。</strong></p>
<p>为数组赋值：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 直接 指定下标赋值</span></span><br><span class="line">a1.[<span class="number">0</span>]=<span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. push 赋值，总是在数组的 最后 添加元素</span></span><br><span class="line">a1.push(<span class="number">4</span>);</span><br></pre></td></tr></table></figure></p>
<p>数组元素 <strong>排序</strong>：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 按字符 顺序排： 100 &lt; 2 &lt; 3 &lt; 4</span></span><br><span class="line">a1.sort();</span><br></pre></td></tr></table></figure></p>
<p>如果想要按 数字大小 排序，需要 <strong>自定义排序方法</strong> ：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fuction compare(i,j)&#123;</span><br><span class="line">  <span class="keyword">return</span> i-j;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按照 数字大小排序： 2 &lt; 3 &lt; 4 &lt; 100</span></span><br><span class="line">a1.sort(compare);</span><br></pre></td></tr></table></figure></p>
<p><strong>数组中的数组</strong>：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> aa = [ [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>] ];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组中 还是 数组， 各个数组 的类型可以不一致</span></span><br><span class="line"><span class="keyword">var</span> <span class="keyword">var</span> aa=[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="string">"hello"</span>,<span class="string">"world"</span>],[<span class="string">"你好"</span>]];</span><br></pre></td></tr></table></figure></p>
<h2 id="math"> 1.4 Math 对象</h2>  

<p>无需创建， 直接使用 Math 对象的 属性和方法。  </p>
<p>比如：  </p>
<p>属性：<br>Math.PI 圆周率 , Math.E 自然对数  等。  </p>
<p>方法：  </p>
<ol>
<li><p>Math.round(x) 四舍五入   </p>
</li>
<li><p><strong>Math. abs(x)</strong> 绝对值，<strong>absolute value</strong>    </p>
</li>
<li><p>Math.pow(x,n) x 的 n 次方， <strong>power</strong>   </p>
</li>
<li><p>Math.sqrt(x) 平方根， <strong>square root</strong>   </p>
</li>
<li><p>Math.random() 返回 0 ~ 1 之间的一个随机数    </p>
</li>
<li><p>Math.max(…value)  返回最大值  </p>
</li>
<li><p>三角函数等等。</p>
</li>
</ol>
<h2 id="date"> 1.5 Date 对象</h2>  

<p>创建 Date 对象：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// d1 的值为 当前系统时间</span></span><br><span class="line"><span class="keyword">var</span> d1 = <span class="keyword">new</span> <span class="built_in">Date</span>();  </span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定 d2 的值</span></span><br><span class="line"><span class="keyword">var</span> d2 = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"2017-3-20 11:23"</span>);</span><br></pre></td></tr></table></figure></p>
<p>获取 毫秒 数：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d1.getTime();</span><br></pre></td></tr></table></figure></p>
<p>读写 时间分量：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//年</span></span><br><span class="line">d1.getFullYear();</span><br><span class="line"><span class="comment">// 月</span></span><br><span class="line">d1.getMonth();</span><br><span class="line"><span class="comment">// 日</span></span><br><span class="line">d1.getDate();</span><br><span class="line"><span class="comment">// 星期几</span></span><br><span class="line">d1.getDay();</span><br><span class="line"><span class="comment">// 等等...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//写， set 对应的分量</span></span><br></pre></td></tr></table></figure></p>
<p>Date 转 字符串：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">d1.toString();</span><br><span class="line"><span class="comment">// "Sat Nov 17 2018 19:07:53 GMT+0800 (China Standard Time)"</span></span><br><span class="line"></span><br><span class="line">d1.toLocaleString();</span><br><span class="line"><span class="comment">// "11/17/2018, 7:07:53 PM"</span></span><br><span class="line"></span><br><span class="line">d1.toLocaleDateString();</span><br><span class="line"><span class="comment">// "11/17/2018"</span></span><br></pre></td></tr></table></figure></p>
<h2 id="regexp"> 1.6 RegExp 正则表达式 对象</h2>

<p><strong><font color="orange">创建 RegExp 对象</font></strong>：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> re = <span class="regexp">/pattern/</span>[flags] ;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="keyword">var</span> re = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"pattern"</span>, [<span class="string">"flags"</span>]);</span><br></pre></td></tr></table></figure></p>
<p><strong>flags</strong> 标识有两个:  </p>
<ol>
<li><p><strong>g</strong>, 全局模式  </p>
</li>
<li><p><strong>i</strong>, 忽略大小写  </p>
</li>
</ol>
<p>RegExp 对象有一个 <strong>test()</strong> 方法，用于 测试字符串 是否匹配 正则表达式。如果匹配，<strong>返回true</strong>。 否则 <strong>false</strong>。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.test(str);</span><br></pre></td></tr></table></figure></p>
<p>注：RegExp 还有一个 <strong>exec()</strong> 方法，这个方法不返回 boolean 类型，而是 <strong>返回匹配到的字符串</strong>。  </p>
<p><strong><font color="green">举两个例子</font></strong>：  </p>
<p>匹配字符串，包含且仅包含 [3, 6] 位数字：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> re = <span class="regexp">/^\d&#123;3,6&#125;$/</span>;</span><br><span class="line"></span><br><span class="line">re.test(<span class="string">"123"</span>); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">re.test(<span class="string">"12"</span>); <span class="comment">//false</span></span><br><span class="line">re.test(<span class="string">"12a"</span>); <span class="comment">//false</span></span><br></pre></td></tr></table></figure></p>
<p>匹配字符串，是否包含 3 位 数字：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> re2=<span class="regexp">/\d&#123;3&#125;/</span>;</span><br><span class="line"></span><br><span class="line">re2.test(<span class="string">"mitre123"</span>); <span class="comment">//true</span></span><br><span class="line">re2.test(<span class="string">"mitre1234"</span>); <span class="comment">//true 包含3位数字</span></span><br><span class="line"></span><br><span class="line">re2.test(<span class="string">"mitre12"</span>); <span class="comment">//false</span></span><br></pre></td></tr></table></figure></p>
<p><strong><font color="orange"><a href="#string">String</a> 和 RegExp</font></strong> :<br><i id="e1">举个例子</i>：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">"JavaScript 和 Java 语法有点类似, 但是 JavaScript 不是 Java"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> re=<span class="regexp">/Java/g</span>;</span><br><span class="line"></span><br><span class="line">str.match(re); <span class="comment">//返回匹配到的字符串的 数组</span></span><br><span class="line"><span class="comment">// (4) ["Java", "Java", "Java", "Java"]</span></span><br><span class="line"></span><br><span class="line">str.replace(<span class="string">"Java"</span>,<span class="string">"java"</span>); <span class="comment">//不用正则， 只改变第一个</span></span><br><span class="line"><span class="comment">// "javaScript 和 Java 语法有点类似, 但是 JavaScript 不是 Java"</span></span><br><span class="line">str.replace(re,<span class="string">"java"</span>);</span><br><span class="line"><span class="comment">// "javaScript 和 java 语法有点类似, 但是 javaScript 不是 java"</span></span><br><span class="line"></span><br><span class="line">str.search(re); <span class="comment">//返回匹配到的第一个 下标， 如果没有匹配到返回 -1</span></span><br><span class="line"><span class="comment">// 0</span></span><br></pre></td></tr></table></figure></p>
<p>登录案例：<br>JS 验证用户名和密码是否符合要求。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"style.css"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">			<span class="comment">//校验用户名</span></span></span><br><span class="line"><span class="javascript">			<span class="function"><span class="keyword">function</span> <span class="title">checkName</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">				<span class="comment">//获取账号文本框</span></span></span><br><span class="line"><span class="javascript">				<span class="keyword">var</span> input=<span class="built_in">document</span>.getElementById(<span class="string">"name"</span>);</span></span><br><span class="line"><span class="javascript">				<span class="comment">//获取账号提示span</span></span></span><br><span class="line"><span class="javascript">				<span class="keyword">var</span> span=<span class="built_in">document</span>.getElementById(<span class="string">"nameMsg"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">				<span class="comment">//获取文本框的值</span></span></span><br><span class="line"><span class="javascript">				<span class="keyword">var</span> name = input.value;</span></span><br><span class="line"><span class="javascript">				<span class="keyword">var</span> re = <span class="regexp">/^\w&#123;3,20&#125;$/</span>;</span></span><br><span class="line"><span class="javascript">				<span class="comment">//若不匹配，把span样式改一下</span></span></span><br><span class="line"><span class="javascript">				<span class="keyword">if</span>(!re.test(name))&#123;</span></span><br><span class="line"><span class="javascript">					<span class="comment">//className 等价于元素的 class属性</span></span></span><br><span class="line"><span class="javascript">					span.className=<span class="string">"errorMsg"</span>;</span></span><br><span class="line"><span class="javascript">					<span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="javascript">				&#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">					span.className=<span class="string">""</span>; <span class="comment">//匹配上需要移除错误样式</span></span></span><br><span class="line"><span class="javascript">					<span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="undefined">				&#125;</span></span><br><span class="line"><span class="undefined">			&#125;</span></span><br><span class="line"><span class="undefined">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- onsubmit 是表单提交事件，点击提交时触发。提交表单前先调用 onsubmit 中的方法，只有方法返回 true 才提交表单--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"mitrecx.cn"</span> <span class="attr">onsubmit</span>=<span class="string">"return checkName()&amp;&amp;checkPassword();"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h1</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">				账号：<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"name"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">onblur</span>=<span class="string">"checkName();"</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"nameMsg"</span>&gt;</span>3-20 位 字母、数字、下划线<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">				密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">onblur</span>=<span class="string">"checkPassword();"</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">span</span>&gt;</span>6-20 位 字母、数字、下划线<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"登录"</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>style.css 文件：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">form</span>&#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">	<span class="attribute">margin</span>: <span class="number">150px</span> auto;</span><br><span class="line">	<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#00ff00</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">form</span> <span class="selector-tag">h1</span>&#123;</span><br><span class="line">	<span class="attribute">text-align</span>:center;</span><br><span class="line">	<span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">	<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">form</span> <span class="selector-tag">p</span>&#123;</span><br><span class="line">	<span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">	<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">form</span> <span class="selector-tag">div</span>&#123;</span><br><span class="line">	<span class="attribute">text-align</span>:center;</span><br><span class="line">	<span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">padding</span>:<span class="number">10px</span>;</span><br><span class="line">	<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.errorMsg</span>&#123;</span><br><span class="line">	<span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">	<span class="attribute">color</span>:red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>结果：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-17_222205.png" alt>  </p>
<h2 id="function"> 1.7 Function 对象</h2>  

<p>在 JS 中，函数就是 Function 对象。<br>函数名就是 指向 Function 对象的引用。  </p>
<p><strong>JS 函数定义</strong>：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">functionName</span>(<span class="params">[参数]</span>)</span>&#123;</span><br><span class="line">  函数体;</span><br><span class="line">  [<span class="keyword">return</span> 返回值;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>函数的返回值</strong>：  </p>
<ul>
<li><p>默认返回 undefined  </p>
</li>
<li><p>可以使用 return 返回具体的值  </p>
</li>
</ul>
<p><strong>函数的参数</strong>：  </p>
<ol>
<li><p>JS 函数没有重载。调用时 只要函数名相同，无论传入多少个参数，调用的都是同一个函数。    </p>
</li>
<li><p>没有收到 <strong>实参</strong> 的参数值都是 <strong>undefined</strong> 类型。  </p>
</li>
<li><p>所有的参数都传递给 JS内部的 <strong><font color="red">arguments数组</font></strong> 对象。<br>function 函数定义时，不论有没有参数，<strong><font color="red">arguments数组</font></strong> 都是存在的。  </p>
</li>
</ol>
<p>arguments 数组：  </p>
<ul>
<li><p>arguments 是一种特殊的对象，在函数中，表示函数的 <strong>参数数组</strong> 。  </p>
</li>
<li><p>在函数中，可以使用 arguments 访问所有的参数：<br>arguments.length : 函数 <strong>实参</strong> 个数<br>arguments[i] : 第 i 个参数  </p>
</li>
</ul>
<p>有了 arguments ， 在 JS 函数中声明与不声明 <strong>形参</strong> 都可以。这使得 JS 的函数定义变得很灵活。<br>一般情况下，最好用到几个参数，就声明几个参数，这样符合编程习惯。  </p>
<p>例如，定义一个 sum() 函数，求所有参数的和：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="built_in">arguments</span>.length;++i)&#123;</span><br><span class="line">        sum+=<span class="built_in">arguments</span>[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>F12，在浏览器控制台测试结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sum(1,2);</span><br><span class="line">3</span><br><span class="line">sum(1,2,3,4,5);</span><br><span class="line">15</span><br></pre></td></tr></table></figure></p>
<p>使用 Function 创建函数 (几乎没人这样写)：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> add=<span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"x"</span>,<span class="string">"y"</span>,<span class="string">"return(x+y)"</span>);</span><br><span class="line"><span class="comment">//效果等价于 var add(x,y)&#123;return x+y;&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">add(1,2);</span><br><span class="line">3</span><br></pre></td></tr></table></figure></p>
<p><strong>alert(add)</strong>，把用 new Function 创建的函数打印出来，结果：<br><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-11/2018-11-18_004942.png" alt><br>这个函数名是 anonymous (匿名的)。  </p>
<p><strong>匿名函数</strong><br>创建匿名函数：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>(<span class="params">arg1, ... , argn</span>)</span>&#123;</span><br><span class="line">  func_body;</span><br><span class="line">  <span class="keyword">return</span> returnValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>匿名函数应用：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=[ <span class="number">8</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">10</span>, <span class="number">33</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line">a.sort();</span><br><span class="line"><span class="comment">//结果：(7) [1, 10, 2, 33, 5, 7, 8]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用匿名函数</span></span><br><span class="line">a.sort( <span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;<span class="keyword">return</span> a-b;&#125; );</span><br><span class="line"><span class="comment">//结果：(7) [1, 2, 5, 7, 8, 10, 33]</span></span><br></pre></td></tr></table></figure></p>
<p><strong>全局函数</strong><br>所谓<a href="http://www.w3school.com.cn/jsref/jsref_obj_global.asp" target="_blank" rel="noopener">全局函数</a>，就是不用创建对象，拿来就能用的函数。  </p>
<p>JS常用的全局函数：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(str);</span><br><span class="line"><span class="built_in">parseFloat</span>(str);</span><br><span class="line"></span><br><span class="line"><span class="comment">//是数字类型 返回 false</span></span><br><span class="line"><span class="built_in">isNaN</span>(variable);</span><br><span class="line"></span><br><span class="line"><span class="comment">//把 str 当做 JS表达式 或 JS代码 执行</span></span><br><span class="line"><span class="built_in">eval</span>(str);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把字符串编码为 URI</span></span><br><span class="line"><span class="built_in">encodeURI</span>(URIstring)</span><br><span class="line"><span class="comment">// 返回 URIstring 的副本，其中的某些字符将被十六进制的转义序列进行替换</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">decodeURI</span>()	<span class="comment">//解码某个编码的 URI。</span></span><br></pre></td></tr></table></figure></p>
<h1 id="2-外部对象"><a href="#2-外部对象" class="headerlink" title="2 外部对象"></a>2 外部对象</h1><p><strong>外部对象就是 浏览器对象模型 ( Browser Object Model, BOM )。</strong>  </p>
<p><img src="https://mitre.oss-cn-hangzhou.aliyuncs.com/blog-2018-12/2018-11-18_100841.png" alt>  </p>
<p>BOM 是 浏览器提供的一套 API。它使 JS 有了操作浏览器窗口的能力。  </p>
<p><strong>文档对象模型 ( Document Object Model, DOM )</strong> 定义了访问和操作文档的方法，它属于 BOM，但是 DOM 的内容占据 BOM 的半壁江山。DOM 就是上图的 <strong>document</strong>。  </p>
<h2 id="2-1-浏览器对象模型-BOM"><a href="#2-1-浏览器对象模型-BOM" class="headerlink" title="2.1 浏览器对象模型 BOM"></a>2.1 浏览器对象模型 BOM</h2><p>window 对象的方法和属性 都可以省略 <strong><font color="red">window.</font></strong> 前缀。<br>比如，<strong><font color="red">window.</font>alert(str)</strong> 可以 写成 <strong>alert(str)</strong> 。  </p>
<p>window对象的方法：  </p>
<p>1、 对话框：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//提示对话框， 无返回</span></span><br><span class="line">alert(<span class="string">"hello world"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//确认对话框， 确认返回true，取消返回false</span></span><br><span class="line">confirm(<span class="string">"你确认吗? "</span>);</span><br></pre></td></tr></table></figure></p>
<p>2、 定时器：<br>定时器通常用于定时刷新页面。  </p>
<p>一次性定时器： setTimeout(functionName,time)<br>周期性定时器： setInterval(functionName, time)</p>
<p>周期性定时器：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 每隔 time 时间 触发执行 functionName函数/代码</span></span><br><span class="line">setInterval(functionName, time);</span><br><span class="line"><span class="comment">// time 的单位是毫秒</span></span><br><span class="line"><span class="comment">// 返回 已经启动的定时器对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 停止已经启动的定时器对象</span></span><br><span class="line">clearInterval(tID);</span><br><span class="line"><span class="comment">// tID 是启动的定时器对象</span></span><br></pre></td></tr></table></figure></p>
<p>举个栗子，每隔 3 秒 弹出提示对话框：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tid=setInterval(<span class="string">"alert('hello');"</span>,<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line">setInterval(fun,<span class="number">3000</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123; alert(<span class="string">"hello"</span>); &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line">setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(<span class="string">"hello"</span>);</span><br><span class="line">&#125;, <span class="number">3000</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="2-2-history-对象"><a href="#2-2-history-对象" class="headerlink" title="2.2 history 对象"></a>2.2 history 对象</h2><p>history 对象 <strong>记录了一个窗口访问过的 URL</strong>   </p>
<p>history 的 属性 和 方法：   </p>
<ol>
<li>length属性，记录中 URL 的数量  </li>
<li>back() ， 等同于点击 后退 按钮  </li>
<li>forward() ，等同于点击 前进 按钮</li>
<li>go(n) ，n为正前进 n 次， n 为负后退 n 次  </li>
</ol>
<h2 id="2-3-location-对象"><a href="#2-3-location-对象" class="headerlink" title="2.3 location 对象"></a>2.3 location 对象</h2><p><strong>location 对象 包含了当前 URL 的相关信息</strong>  </p>
<p>location 通常用于 获取和改变当前浏览的 URL  </p>
<p>location 的 属性 和 方法：  </p>
<ol>
<li><p>href 属性： 若给 href 属性赋值，则会改变当前浏览的 URL。 若不赋值则 返回当前窗口正在浏览的地址。    </p>
</li>
<li><p>reload() 方法： 重新加载当前地址。  </p>
</li>
</ol>
<h2 id="2-4-screen-和-navigator"><a href="#2-4-screen-和-navigator" class="headerlink" title="2.4 screen 和 navigator"></a>2.4 screen 和 navigator</h2><p><strong>screen 对象包含有关客户端显示屏幕的信息。</strong>  </p>
<p>Screen 对象属性：  </p>
<ol>
<li>availHeight    返回显示屏幕的高度 (除 Windows 任务栏之外)。  </li>
<li>availWidth    返回显示屏幕的宽度 (除 Windows 任务栏之外)。  </li>
</ol>
<p><strong>navigator 对象包含有关浏览器的信息。</strong>  </p>
<p>navigator 对象 属性：  </p>
<ol>
<li>userAgent    返回由客户机发送服务器的 user-agent 头部的值。</li>
</ol>
<h2 id="2-5-DOM"><a href="#2-5-DOM" class="headerlink" title="2.5 DOM"></a>2.5 DOM</h2><p>DOM 提供了如下操作：  </p>
<ol>
<li>查找节点  </li>
<li>读取节点信息</li>
<li>修改节点信息  </li>
<li>创建新节点  </li>
<li>删除节点  </li>
</ol>
<p>节点信息：<br>nodeName 节点名称，<br>nodeType 节点类型。  </p>
<p>节点的内容：<br>innerHTML，<br>innerText。  </p>
<p>节点的属性：<br>getAttribute()<br>setAttribute()<br>removeAttribute()  </p>
<p>节点的样式：<br>className， <strong>类选择器</strong> 封装的类型 style<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&lt;p id="t1"&gt; hello world.&lt;/p&gt;</span></span><br><span class="line">vat t = <span class="built_in">document</span>.getElementById(<span class="string">"t1"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//改变字体颜色  和 大小</span></span><br><span class="line">t.style.color = <span class="string">"red"</span>;</span><br><span class="line">t.style.fontSize = <span class="string">"30px"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &lt;a href="xxx.jsp" title="this is a link"  id="a1" &gt; xxx &lt;/a&gt;</span></span><br><span class="line"><span class="keyword">var</span> a1 = <span class="built_in">document</span>.getElementById(<span class="string">"a1"</span>);</span><br><span class="line"><span class="comment">//获取 a 元素的 href 属性 值</span></span><br><span class="line"><span class="keyword">var</span> href = a1.getAttribute(<span class="string">"href"</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="3-自定义对象"><a href="#3-自定义对象" class="headerlink" title="3 自定义对象"></a>3 自定义对象</h1><p>自定义对象 是一种有属性和方法封装而成的 <strong>数据类型</strong>。   </p>
<p>调用对象属性： 对象名.属性名<br>调用对象方法： 对象名.方法名  </p>
<p>创建 自定义对象 有三种方法：  </p>
<p>1、 直接创建<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 直接 new 一个 Object</span></span><br><span class="line"><span class="keyword">var</span> teacher = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"><span class="comment">// 自定义属性</span></span><br><span class="line">teacher.name = <span class="string">"陶行知"</span>;</span><br><span class="line">teacher.age = <span class="string">"50"</span>;</span><br><span class="line"><span class="comment">// 自定义方法</span></span><br><span class="line">teacher.work = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(<span class="string">"我教 JavaScript"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用对象</span></span><br><span class="line">alert(<span class="string">"姓名: "</span>+ teacher.name +<span class="string">" 年龄： "</span>+teacher.age);</span><br><span class="line">teacher.work();</span><br></pre></td></tr></table></figure></p>
<p>2、 使用构造器创建<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 写一个构造器方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name=name;</span><br><span class="line">  <span class="keyword">this</span>.age=age;</span><br><span class="line">  <span class="keyword">this</span>.work=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">"我学 Java"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建对象</span></span><br><span class="line"><span class="keyword">var</span> s=<span class="keyword">new</span> Student(<span class="string">"小艾"</span>,<span class="number">20</span>);</span><br></pre></td></tr></table></figure></p>
<p>3、 <strong><font color="red">使用 JSON(JavaScript Object Notation, JS对象标记) 创建</font></strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个 programmer对象</span></span><br><span class="line"><span class="keyword">var</span> programmer=&#123;</span><br><span class="line">  <span class="string">"name"</span>:<span class="string">"mitre"</span>,</span><br><span class="line">  <span class="string">"age"</span>:<span class="number">24</span>;</span><br><span class="line">  <span class="string">"work"</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">"我写 Java  "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以直接调用 programmer 对象</span></span><br><span class="line">alert(programmer.name+<span class="string">" "</span>+programmer.age);</span><br><span class="line">programmer.work();</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://mitre.oss-cn-hangzhou.aliyuncs.com/img/vlcsnap-2018-02-22-21h01m56s237.png" alt="mitre">
            
              <p class="site-author-name" itemprop="name">mitre</p>
              <p class="site-description motion-element" itemprop="description">Goals determine what you are going to be</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">105</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">34</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-globe"></i>
                Friends
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.yanmin99.com/" title="yanmin" target="_blank">yanmin</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://whark.cn" title="大鹏" target="_blank">大鹏</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.notall.cn/" title="zkp" target="_blank">zkp</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://qiracle.cn/" title="强强" target="_blank">强强</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">mitre</span>

  
</div>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container_site_pv">totle: <span id="busuanzi_value_site_pv"></span> times</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">Visitors: <span id="busuanzi_value_site_uv"></span></span>
    <span class="post-meta-divider">|</span>



  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.3</div>






        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  








  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

</body>
</html>
